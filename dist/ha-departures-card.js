function t(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}"function"==typeof SuppressedError&&SuppressedError;const e=globalThis,n=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),i=new WeakMap;class o{constructor(t,e,n){if(this._$cssResult$=!0,n!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(n&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=i.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&i.set(e,t))}return t}toString(){return this.cssText}}const a=t=>new o("string"==typeof t?t:t+"",void 0,r),s=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[r+1]),t[0]);return new o(n,t,r)},u=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return a(e)})(t):t,{is:l,defineProperty:c,getOwnPropertyDescriptor:f,getOwnPropertyNames:d,getOwnPropertySymbols:h,getPrototypeOf:p}=Object,g=globalThis,v=g.trustedTypes,m=v?v.emptyScript:"",_=g.reactiveElementPolyfillSupport,y=(t,e)=>t,b={toAttribute(t,e){switch(e){case Boolean:t=t?m:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},w=(t,e)=>!l(t,e),E={attribute:!0,type:String,converter:b,reflect:!1,useDefault:!1,hasChanged:w};Symbol.metadata??=Symbol("metadata"),g.litPropertyMetadata??=new WeakMap;class x extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=E){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(t,n,e);void 0!==r&&c(this.prototype,t,r)}}static getPropertyDescriptor(t,e,n){const{get:r,set:i}=f(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:r,set(e){const o=r?.call(this);i?.call(this,e),this.requestUpdate(t,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??E}static _$Ei(){if(this.hasOwnProperty(y("elementProperties")))return;const t=p(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(y("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(y("properties"))){const t=this.properties,e=[...d(t),...h(t)];for(const n of e)this.createProperty(n,t[n])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(u(t))}else void 0!==t&&e.push(u(t));return e}static _$Eu(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,r)=>{if(n)t.adoptedStyleSheets=r.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of r){const r=document.createElement("style"),i=e.litNonce;void 0!==i&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$ET(t,e){const n=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,n);if(void 0!==r&&!0===n.reflect){const i=(void 0!==n.converter?.toAttribute?n.converter:b).toAttribute(e,n.type);this._$Em=t,null==i?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null}}_$AK(t,e){const n=this.constructor,r=n._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=n.getPropertyOptions(r),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:b;this._$Em=r;const o=i.fromAttribute(e,t.type);this[r]=o??this._$Ej?.get(r)??o,this._$Em=null}}requestUpdate(t,e,n){if(void 0!==t){const r=this.constructor,i=this[t];if(n??=r.getPropertyOptions(t),!((n.hasChanged??w)(i,e)||n.useDefault&&n.reflect&&i===this._$Ej?.get(t)&&!this.hasAttribute(r._$Eu(t,n))))return;this.C(t,e,n)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:n,reflect:r,wrapped:i},o){n&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,o??e??this[t]),!0!==i||void 0!==o)||(this._$AL.has(t)||(this.hasUpdated||n||(e=void 0),this._$AL.set(t,e)),!0===r&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t){const{wrapped:t}=n,r=this[e];!0!==t||this._$AL.has(e)||void 0===r||this.C(e,void 0,n,r)}}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(t){}firstUpdated(t){}}x.elementStyles=[],x.shadowRootOptions={mode:"open"},x[y("elementProperties")]=new Map,x[y("finalized")]=new Map,_?.({ReactiveElement:x}),(g.reactiveElementVersions??=[]).push("2.1.1");const A=globalThis,$=A.trustedTypes,T=$?$.createPolicy("lit-html",{createHTML:t=>t}):void 0,C="$lit$",k=`lit$${Math.random().toFixed(9).slice(2)}$`,S="?"+k,I=`<${S}>`,D=document,L=()=>D.createComment(""),N=t=>null===t||"object"!=typeof t&&"function"!=typeof t,O=Array.isArray,P="[ \t\n\f\r]",M=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,R=/-->/g,z=/>/g,j=RegExp(`>|${P}(?:([^\\s"'>=/]+)(${P}*=${P}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),H=/'/g,U=/"/g,B=/^(?:script|style|textarea|title)$/i,W=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),F=Symbol.for("lit-noChange"),V=Symbol.for("lit-nothing"),Z=new WeakMap,q=D.createTreeWalker(D,129);function X(t,e){if(!O(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==T?T.createHTML(e):e}const K=(t,e)=>{const n=t.length-1,r=[];let i,o=2===e?"<svg>":3===e?"<math>":"",a=M;for(let e=0;e<n;e++){const n=t[e];let s,u,l=-1,c=0;for(;c<n.length&&(a.lastIndex=c,u=a.exec(n),null!==u);)c=a.lastIndex,a===M?"!--"===u[1]?a=R:void 0!==u[1]?a=z:void 0!==u[2]?(B.test(u[2])&&(i=RegExp("</"+u[2],"g")),a=j):void 0!==u[3]&&(a=j):a===j?">"===u[0]?(a=i??M,l=-1):void 0===u[1]?l=-2:(l=a.lastIndex-u[2].length,s=u[1],a=void 0===u[3]?j:'"'===u[3]?U:H):a===U||a===H?a=j:a===R||a===z?a=M:(a=j,i=void 0);const f=a===j&&t[e+1].startsWith("/>")?" ":"";o+=a===M?n+I:l>=0?(r.push(s),n.slice(0,l)+C+n.slice(l)+k+f):n+k+(-2===l?e:f)}return[X(t,o+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),r]};class G{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let i=0,o=0;const a=t.length-1,s=this.parts,[u,l]=K(t,e);if(this.el=G.createElement(u,n),q.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=q.nextNode())&&s.length<a;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(C)){const e=l[o++],n=r.getAttribute(t).split(k),a=/([.?@])?(.*)/.exec(e);s.push({type:1,index:i,name:a[2],strings:n,ctor:"."===a[1]?et:"?"===a[1]?nt:"@"===a[1]?rt:tt}),r.removeAttribute(t)}else t.startsWith(k)&&(s.push({type:6,index:i}),r.removeAttribute(t));if(B.test(r.tagName)){const t=r.textContent.split(k),e=t.length-1;if(e>0){r.textContent=$?$.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],L()),q.nextNode(),s.push({type:2,index:++i});r.append(t[e],L())}}}else if(8===r.nodeType)if(r.data===S)s.push({type:2,index:i});else{let t=-1;for(;-1!==(t=r.data.indexOf(k,t+1));)s.push({type:7,index:i}),t+=k.length-1}i++}}static createElement(t,e){const n=D.createElement("template");return n.innerHTML=t,n}}function Y(t,e,n=t,r){if(e===F)return e;let i=void 0!==r?n._$Co?.[r]:n._$Cl;const o=N(e)?void 0:e._$litDirective$;return i?.constructor!==o&&(i?._$AO?.(!1),void 0===o?i=void 0:(i=new o(t),i._$AT(t,n,r)),void 0!==r?(n._$Co??=[])[r]=i:n._$Cl=i),void 0!==i&&(e=Y(t,i._$AS(t,e.values),i,r)),e}class J{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,r=(t?.creationScope??D).importNode(e,!0);q.currentNode=r;let i=q.nextNode(),o=0,a=0,s=n[0];for(;void 0!==s;){if(o===s.index){let e;2===s.type?e=new Q(i,i.nextSibling,this,t):1===s.type?e=new s.ctor(i,s.name,s.strings,this,t):6===s.type&&(e=new it(i,this,t)),this._$AV.push(e),s=n[++a]}o!==s?.index&&(i=q.nextNode(),o++)}return q.currentNode=D,r}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class Q{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,r){this.type=2,this._$AH=V,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Y(this,t,e),N(t)?t===V||null==t||""===t?(this._$AH!==V&&this._$AR(),this._$AH=V):t!==this._$AH&&t!==F&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>O(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==V&&N(this._$AH)?this._$AA.nextSibling.data=t:this.T(D.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=G.createElement(X(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(e);else{const t=new J(r,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t}}_$AC(t){let e=Z.get(t.strings);return void 0===e&&Z.set(t.strings,e=new G(t)),e}k(t){O(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const i of t)r===e.length?e.push(n=new Q(this.O(L()),this.O(L()),this,this.options)):n=e[r],n._$AI(i),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class tt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,r,i){this.type=1,this._$AH=V,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=V}_$AI(t,e=this,n,r){const i=this.strings;let o=!1;if(void 0===i)t=Y(this,t,e,0),o=!N(t)||t!==this._$AH&&t!==F,o&&(this._$AH=t);else{const r=t;let a,s;for(t=i[0],a=0;a<i.length-1;a++)s=Y(this,r[n+a],e,a),s===F&&(s=this._$AH[a]),o||=!N(s)||s!==this._$AH[a],s===V?t=V:t!==V&&(t+=(s??"")+i[a+1]),this._$AH[a]=s}o&&!r&&this.j(t)}j(t){t===V?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class et extends tt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===V?void 0:t}}class nt extends tt{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==V)}}class rt extends tt{constructor(t,e,n,r,i){super(t,e,n,r,i),this.type=5}_$AI(t,e=this){if((t=Y(this,t,e,0)??V)===F)return;const n=this._$AH,r=t===V&&n!==V||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,i=t!==V&&(n===V||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class it{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Y(this,t)}}const ot=A.litHtmlPolyfillSupport;ot?.(G,Q),(A.litHtmlVersions??=[]).push("3.3.1");const at=globalThis;class st extends x{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(void 0===i){const t=n?.renderBefore??null;r._$litPart$=i=new Q(e.insertBefore(L(),t),t,void 0,n??{})}return i._$AI(t),i})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return F}}st._$litElement$=!0,st.finalized=!0,at.litElementHydrateSupport?.({LitElement:st});const ut=at.litElementPolyfillSupport;var lt,ct,ft,dt,ht;ut?.({LitElement:st}),(at.litElementVersions??=[]).push("4.2.1"),function(t){t.BASIC="basic",t.BLACK_WHITE="black-white",t.BLUE_OCEAN="blue-ocean",t.CAPPUCINO="cappucino",t.TABLE="table"}(lt||(lt={})),function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(ct||(ct={})),function(t){t.DELAY="delay",t.DESTINATION="destination",t.ESTIMATED_TIME="estimated-time",t.ICON="icon",t.LINE="line",t.PLANNED_TIME="planned-time",t.TIME_DIFF="time-diff"}(ft||(ft={})),function(t){t.DIRECTION="direction",t.FRIENDLY_NAME="friendly_name",t.ICON="icon",t.LINE_ID="line_id",t.LINE_NAME="line_name",t.TIMES="times",t.TRANSPORT="transport",t.PLANNED_DEPARTURE_TIME="planned_departure_time",t.PLANNED_DEPARTURE_TIME_1="planned_departure_time_1",t.PLANNED_DEPARTURE_TIME_2="planned_departure_time_2",t.PLANNED_DEPARTURE_TIME_3="planned_departure_time_3",t.PLANNED_DEPARTURE_TIME_4="planned_departure_time_4",t.ESTIMATED_DEPARTURE_TIME="estimated_departure_time",t.ESTIMATED_DEPARTURE_TIME_1="estimated_departure_time_1",t.ESTIMATED_DEPARTURE_TIME_2="estimated_departure_time_2",t.ESTIMATED_DEPARTURE_TIME_3="estimated_departure_time_3",t.ESTIMATED_DEPARTURE_TIME_4="estimated_departure_time_4"}(dt||(dt={})),function(t){t.DIRECTION="direction",t.FRIENDLY_NAME="friendly_name",t.ICON="icon",t.STATION="station",t.VIA_STATIONS="via_stations",t.NEXT_DEPARTURES="next_departures"}(ht||(ht={}));const pt=s`
  .content {
    --departures-bg: #363636;
    --departures-delay-ok: #23a043;
    --departures-delay-bad: #f44336;
    --departures-delay-none: #252525;
    --departures-border-color: lightgrey;
  }
  ha-card {
    display: block;
    height: auto;
    width: 100%;
    overflow: hidden;
  }
  .card-header {
    display: flex;
    flex-wrap: nowrap;
    justify-content: space-between;
    align-items: center;
    font-size: 2em;
    padding-bottom: 8px;
  }
  .content {
    padding: 0px 0px;
  }
`,gt=s`
  .list-header-content,
  .departure-line {
    display: grid;
    column-gap: 5px;
    padding: 5px 5px;
    align-items: end;
  }
  .list-header-content {
    font-size: 0.8em;
    font-weight: bold;
  }
  .list-header-icon,
  .cell-transport-icon {
    text-align: center;
  }
  .list-header-line,
  .cell-line {
    text-align: center;
    padding: 0px 5px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  .list-header-destination,
  .cell-destination {
    flex-grow: 1;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  .list-header-time-diff,
  .cell-time-diff {
    text-align: center;
  }
  .list-header-planned-time,
  .cell-planned-time {
    text-align: center;
  }
  .list-header-estimated-time,
  .cell-estimated-time {
    text-align: center;
  }
  .cell-delay {
    width: 100%;
    text-align: center;
    border-radius: 1000px;
    color: white;
  }
  .cell-delay.delayed {
    background-color: var(--departures-delay-bad);
  }
  .cell-delay.earlier {
    background-color: var(--departures-delay-ok);
  }
  .error {
    display: grid;
    grid-template-columns: 30px 1fr;
    border-left: 5px solid red;
    border: 1px solid red;
    padding: 5px;
    margin: 5px 0px;
    align-items: center;
  }
  .error span {
    font-weight: 500;
  }

  #content-background {
    border-radius: 5px;
    background: var(--departures-bg);
  }
  .splide__slide {
    align-items: center;
    background-color: transparent;
  }

  /* Basic theme */
  #content-background[theme="basic"] {
    background-color: transparent;
  }
  .departure-line[theme="basic"] {
    border-radius: 3px;
    border: 1px solid var(--departures-border-color);
  }
  .cell-line[theme="basic"] {
    border-radius: 3px;
    background-color: var(--cell-line-background);
  }

  /* Black-White theme */
  #content-background[theme="black-white"] {
    padding: 8px;
    border-radius: 6px;
    background-color: #000000;
    color: white;
    font-family: "Roboto Mono", monospace;
  }
  .departure-line[theme="black-white"] {
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
  }
  .cell-line[theme="black-white"] {
    font-weight: bold;
    color: white;
  }
  .cell-destination[theme="black-white"] {
    text-transform: uppercase;
    letter-spacing: 2px;
  }

  /* Cappucino theme */
  #content-background[theme="cappucino"] {
    padding: 10px;
    color: white;
  }
  .list-header-content[theme="cappucino"] {
    padding-left: 13px; // 5px standard + 8px left color border!
  }
  .cell-line[theme="cappucino"] {
    font-weight: bold;
  }
  .departure-line[theme="cappucino"],
  .table-row[theme="cappucino"] {
    background-color: #f5efe6;
    color: #6f4e37;
  }
  .cell-delay[theme="cappucino"] {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Blue Ocean theme */
  #content-background[theme="blue-ocean"] {
    padding: 10px;
    background-color: #0d2f55;
    color: white;
  }
  .departure-line[theme="blue-ocean"] > div,
  .table-row[theme="blue-ocean"] > div {
    border-bottom: 1px solid white;
    padding-bottom: 3px;
  }
  .cell-line[theme="blue-ocean"] {
    padding: 0px;
  }
  .cell-estimated-time[theme="blue-ocean"] > div {
    background: lightgray;
    color: black;
  }
  .cell-estimated-time[theme="blue-ocean"].delayed {
    color: var(--departures-delay-bad);
  }
  .cell-estimated-time[theme="blue-ocean"].earlier {
    color: var(--departures-delay-ok);
  }
  .cell-delay[theme="blue-ocean"] {
    border-radius: 0;
  }
`;const vt=Symbol.for("constructDateFrom");function mt(t,e){return r=t,"function"==typeof(n=e||t)?n(r):n&&"object"==typeof n&&vt in n?n[vt](r):n instanceof Date?new n.constructor(r):new Date(r);var n,r}function _t(t,e,n){const r=(i=e,(+mt(t)-+mt(i))/6e4);var i,o;return(o=n?.roundingMethod,t=>{const e=(o?Math[o]:Math.trunc)(t);return 0===e?0:e})(r)}function yt(t){if(!t||"unknown"===t||void 0===t)throw new Error("Provided date is invalid!");let e=new Date(t);return e.setSeconds(0,0),e}class bt{constructor(t){this.timerId=null,this.callback=null,this.duration=t}start(t){null===this.timerId&&(this.callback=t,this.timerId=window.setTimeout((()=>{t(),this.callback=null,this.timerId=null}),this.duration))}stop(){null!==this.timerId&&(clearTimeout(this.timerId),this.timerId=null)}restart(){this.stop(),null!==this.callback&&this.start(this.callback)}isRunning(){return null!=this.timerId}}class wt{constructor(t,e){try{this._planned=yt(t)}catch(e){throw console.error("Failed to parse `planned` date",t),e}try{this._estimated=yt(e)}catch{this._estimated=void 0}this._estimated?this._delay=_t(this._estimated,this._planned):this._delay=void 0}get planned(){return this._planned}get estimated(){return this._estimated}get time(){return this._estimated?this._estimated:this._planned}get timeDiff(){const t=yt(new Date);return _t(this.time,t)}isArriving(t=0){return this.timeDiff<=t}get delay(){return this._delay}get isDelayed(){return null!=this._delay&&this._delay>0}get isEarlier(){return null!=this._delay&&this._delay<0}}class Et extends Error{constructor(t="",e){super(t),this.message=t,this.entityId=e,this.name=e,this.stack=(new Error).stack,Object.setPrototypeOf(this,Et.prototype)}}class xt extends Error{constructor(t="",e){super(t),this.message=t,this.entityId=e,this.name=e,this.stack=(new Error).stack,Object.setPrototypeOf(this,xt.prototype)}}class At{static getParser(t){let e=null;if("unavailable"===t.state)throw new xt("Entity is not available!",t.entity_id);if(dt.TIMES in t.attributes||dt.PLANNED_DEPARTURE_TIME in t.attributes)e=new Tt(t);else{if(!(ht.NEXT_DEPARTURES in t.attributes))throw new Et("No valid data parser found!",t.entity_id);e=new Ct(t)}return e}}class $t{constructor(t){this._entity=t}}class Tt extends $t{getTimes(){let t=[];if(this._entity.attributes[dt.TIMES])this._entity.attributes[dt.TIMES].forEach((e=>{t.push(new wt(e.planned,e.estimated))}));else if(this._entity.attributes[dt.PLANNED_DEPARTURE_TIME]){const e=this._entity.attributes[dt.PLANNED_DEPARTURE_TIME],n=this._entity.attributes[dt.ESTIMATED_DEPARTURE_TIME],r=this._entity.attributes[dt.PLANNED_DEPARTURE_TIME_1],i=this._entity.attributes[dt.ESTIMATED_DEPARTURE_TIME_1],o=this._entity.attributes[dt.PLANNED_DEPARTURE_TIME_2],a=this._entity.attributes[dt.ESTIMATED_DEPARTURE_TIME_2],s=this._entity.attributes[dt.PLANNED_DEPARTURE_TIME_3],u=this._entity.attributes[dt.ESTIMATED_DEPARTURE_TIME_3],l=this._entity.attributes[dt.PLANNED_DEPARTURE_TIME_4],c=this._entity.attributes[dt.ESTIMATED_DEPARTURE_TIME_4];e&&t.push(new wt(e,n)),r&&t.push(new wt(r,i)),o&&t.push(new wt(o,a)),s&&t.push(new wt(s,u)),l&&t.push(new wt(l,c))}return t}getLineName(){return this._entity.attributes[dt.LINE_NAME]}getDirection(){return this._entity.attributes[dt.DIRECTION]}getTransport(){return this._entity.attributes[dt.TRANSPORT]}getTransportIcon(){return this._entity.attributes[dt.ICON]}}class Ct extends $t{getTimes(){throw new Error("Not implemented yet!")}getLineName(){throw new Error("Not implemented yet!")}getDirection(){throw new Error("Not implemented yet!")}getTransport(){throw new Error("Not implemented yet!")}getTransportIcon(){throw new Error("Not implemented yet!")}}const kt="Departures",St="mdi:bus-multiple",It=!0,Dt=ct.VERTICAL,Lt="none",Nt=[ft.ICON,ft.LINE,ft.DESTINATION,ft.TIME_DIFF,ft.DELAY],Ot=lt.BASIC,Pt=new Map([[ft.ICON,"30px"],[ft.LINE,"50px"],[ft.DESTINATION,"1fr"],[ft.TIME_DIFF,"70px"],[ft.PLANNED_TIME,"55px"],[ft.ESTIMATED_TIME,"55px"],[ft.DELAY,"30px"]]),Mt=new Map([[ft.ICON,"30px"],[ft.LINE,"50px"],[ft.DESTINATION,"1fr"],[ft.TIME_DIFF,"1fr"]]),Rt="mdi:bus";class zt{constructor(){this._data=new Map,this._errors=[]}get errors(){return this._errors}update(t,e){e&&t&&(this._removeObsoleteData(e),this._updateData(t,e))}getDepartures(t=!0){let e=Array.from(this._data.values()),n=[];return e.forEach((t=>{t.times.forEach((e=>{e.timeDiff>=0&&n.push({entity:t.entity,lineName:t.lineName,destinationName:t.destinationName,lineColor:t.lineColor,icon:t.icon,time:e})}))})),t&&n.sort(((t,e)=>t.time.time.getTime()-e.time.time.getTime())),n}_removeObsoleteData(t){let e=t.filter((t=>!this._data.has(t.entity)));e.forEach((t=>{this._data.delete(t.entity)}))}_updateData(t,e){this._errors=[],e.forEach((e=>{const n=t.states[e.entity];try{const t=At.getParser(n);this._createOrUpdateEntry(e,t)}catch(t){t instanceof Et?(console.warn("Not supported entity found:"+t.entityId),this._errors.push(t)):t instanceof xt&&(console.warn("Entity is not available:"+t.entityId),this._errors.push(t))}}))}_createOrUpdateEntry(t,e){const n=t.entity,r=t.lineName||e.getLineName(),i=t.destinationName||e.getDirection(),o=t.lineColor,a=e.getTimes(),s=t.icon||e.getTransportIcon()||Rt;if(this._data.has(t.entity)){let e=this._data.get(t.entity);e&&(e.lineName=r,e.destinationName=i,e.lineColor=o,e.icon=s,e.times=a)}else this._data.set(t.entity,{entity:n,lineName:r,destinationName:i,lineColor:o,icon:s,times:a})}}const jt=t=>(e,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)},Ht={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:w},Ut=(t=Ht,e,n)=>{const{kind:r,metadata:i}=n;let o=globalThis.litPropertyMetadata.get(i);if(void 0===o&&globalThis.litPropertyMetadata.set(i,o=new Map),"setter"===r&&((t=Object.create(t)).wrapped=!0),o.set(n.name,t),"accessor"===r){const{name:r}=n;return{set(n){const i=e.get.call(this);e.set.call(this,n),this.requestUpdate(r,i,t)},init(e){return void 0!==e&&this.C(r,void 0,t,e),e}}}if("setter"===r){const{name:r}=n;return function(n){const i=this[r];e.call(this,n),this.requestUpdate(r,i,t)}}throw Error("Unsupported decorator location: "+r)};function Bt(t){return(e,n)=>"object"==typeof n?Ut(t,e,n):((t,e,n)=>{const r=e.hasOwnProperty(n);return e.constructor.createProperty(n,t),r?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)}function Wt(t){return Bt({...t,state:!0,attribute:!1})}const Ft=1,Vt=t=>(...e)=>({_$litDirective$:t,values:e});class Zt{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const qt=Vt(class extends Zt{constructor(t){if(super(t),t.type!==Ft||"class"!==t.name||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(void 0===this.st){this.st=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(e)}const n=t.element.classList;for(const t of this.st)t in e||(n.remove(t),this.st.delete(t));for(const t in e){const r=!!e[t];r===this.st.has(t)||this.nt?.has(t)||(r?(n.add(t),this.st.add(t)):(n.remove(t),this.st.delete(t)))}return F}}),Xt="important",Kt=" !"+Xt,Gt=Vt(class extends Zt{constructor(t){if(super(t),t.type!==Ft||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,n)=>{const r=t[n];return null==r?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:n}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?n.removeProperty(t):n[t]=null);for(const t in e){const r=e[t];if(null!=r){this.ft.add(t);const e="string"==typeof r&&r.endsWith(Kt);t.includes("-")||e?n.setProperty(t,e?r.slice(0,-11):r,e?Xt:""):n[t]=r}}return F}});function Yt(t){return!(!((e=t)instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))&&"number"!=typeof t||isNaN(+mt(t)));var e}function Jt(t,e){return(t<0?"-":"")+Math.abs(t).toString().padStart(e,"0")}const Qt={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Jt("yy"===e?r%100:r,e.length)},M(t,e){const n=t.getMonth();return"M"===e?String(n+1):Jt(n+1,2)},d:(t,e)=>Jt(t.getDate(),e.length),a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(t,e)=>Jt(t.getHours()%12||12,e.length),H:(t,e)=>Jt(t.getHours(),e.length),m:(t,e)=>Jt(t.getMinutes(),e.length),s:(t,e)=>Jt(t.getSeconds(),e.length),S(t,e){const n=e.length,r=t.getMilliseconds();return Jt(Math.trunc(r*Math.pow(10,n-3)),e.length)}},te=/(\w)\1*|''|'(''|[^'])+('|$)|./g,ee=/^'([^]*?)'?$/,ne=/''/g,re=/[a-zA-Z]/;function ie(t,e){const n=mt(t);if(!Yt(n))throw new RangeError("Invalid time value");const r=e.match(te);if(!r)return"";const i=r.map((t=>{if("''"===t)return"'";const e=t[0];if("'"===e)return function(t){const e=t.match(ee);return e?e[1].replace(ne,"'"):t}(t);const r=Qt[e];if(r)return r(n,t);if(e.match(re))throw new RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return t})).join("");return i}const oe={en:{card:{editor:{title:"Card header text (optional)",icon:"Card icon (optional)",showCardHeader:"Show card header","design-expandable":"Design & content",cardOrientation:"Card orientation",cardOrientationVerticalDescription:"Show departures in a scrollable list",cardOrientationHorizontalDescription:"Show departures in a table view (legacy  behavior)",theme:"Card Theme",showListHeader:"Show list header",showScrollButtons:"Show scroll buttons",departuresToShow:"Number of departures to show",scrollBackTimeout:"Scroll-back time (seconds)",sortDepartures:"Sort entities by planned departure time","layout-expandable":"Departure layout",layout:"Add cell","layout-cells":{icon:"Transport icon",line:"Line",destination:"Destination","time-diff":"Departure in","planned-time":"Planned time","estimated-time":"Estimated time",delay:"Delay"},layoutWarning:"The following cells will be ignored when using the horizontal orientation","animation-expandable":"Departure icon & animation",departureIcon:"Custom departure icon",animateLine:"Animate departure line",arrivalTimeOffset:"Arrival time offset",departureAnimation:"Departure animation",noAnimation:"None","interactions-expandable":"Interactions","entities-expandable":"Entities (required)",addEntity:"Add entity",entity:{entity:"Entity",destinationName:"Destination name",lineName:"Line name",lineColor:"Line color",icon:"Custom transport icon",remove:"Remove"},help:{showListHeader:"Show the header row for the departure list",showScrollButtons:"Show buttons to scroll through the departure list",sortDepartures:"Sort departures by their planned time",scrollBackTimeout:"Time in seconds before the list automatically scrolls back to the top",layout:"Configure which cells are shown and their order in a departure row",departureIcon:"If no custom icon is defined, the entity's transport icon will be used for the animation",animateLine:"If disabled, only the departure time cell will be animated",arrivalTimeOffset:"Time in minutes before departure when the animation starts"}},"list-header":{icon:"Icon",line:"Line",destination:"Destination","time-diff":"Departure in","planned-time":"Planned","estimated-time":"Estimated",delay:"Delay"},errors:{"no-card-orientation-set":'Please set "Card orientation" option'}}},de:{card:{editor:{title:"Kartenüberschrift (optional)",icon:"Kartensymbol  (optional)",showCardHeader:"Kartenüberschrift anzeigen","design-expandable":"Design & Inhalt",cardOrientation:"Kartenausrichtung",cardOrientationVerticalDescription:"Zeigt die Ankünfte in einer scrollbaren Liste",cardOrientationHorizontalDescription:"Zeigt die Ankünfte in einer Tabellenansicht",theme:"Card Theme",showListHeader:"Listenüberschrift anzeigen",showScrollButtons:"Scroll-Schaltflächen anzeigen",departuresToShow:"Anzahl der Ankünfte zu anzeigen",scrollBackTimeout:"Zurückscroll-Zeit (Sekunden)",sortDepartures:"Entitäten nach geplanter Ankunft sortieren","layout-expandable":"Layout der Ankunftszeile",layout:"Zelle hinzufügen","layout-cells":{icon:"Transport icon",line:"Linie",destination:"Ziel","time-diff":"Ankunft in","planned-time":"Geplante Zeit","estimated-time":"Geschätzte Zeit",delay:"Verspätung"},layoutWarning:"Die folgenden Zellen werden bei horizontaler Kartenausrichtung ignoriert","animation-expandable":"Ankunftssymbol & Animation",departureIcon:"Benutzerdefiniertes Ankunftssymbol",animateLine:"Ankunftszeile animieren",arrivalTimeOffset:"Ankunftszeit-Versatz",departureAnimation:"Ankunftsanimation",noAnimation:"Keine","interactions-expandable":"Interaktionen","entities-expandable":"Entitäten (erforderlich)",addEntity:"Entität hinzufügen",entity:{entity:"Entität",destinationName:"Zielname",lineName:"Linienname",lineColor:"Linienfarbe",icon:"Transport Icon",remove:"Entfernen"},help:{showListHeader:"Zeigt die Spaltenüberschriften der Ankunftsliste an",showScrollButtons:"Zeigt Schaltflächen zum Hoch- und Runterscrollen der Liste an",sortDepartures:"Sortiert die Ankünfte nach ihrer geplanten Zeit",scrollBackTimeout:"Zeit in Sekunden, nach der automatisch zum Listenanfang zurückgescrollt wird",layout:"Konfiguration der angezeigten Zellen und ihrer Reihenfolge in einer Ankunftszeile",departureIcon:"Wenn kein benutzerdefiniertes Symbol festgelegt ist, wird das transport icon der Entität für die Animation verwendet",animateLine:"Wenn deaktiviert, wird nur die Zelle 'Ankunft in' animiert",arrivalTimeOffset:"Zeit in Minuten vor der geplanten Ankunft, ab der die Animation startet"}},"list-header":{icon:"Icon",line:"Linie",destination:"Ziel","time-diff":"Ankunft in","planned-time":"Geplant","estimated-time":"Geschätzt",delay:"Verspät."},errors:{"no-card-orientation-set":'Bitte die Option "Kartenausrichtung" setzen'}}}};function ae(t,e){return e.split(".").reduce(((t,e)=>t?.[e]),t)}function se(t,e="en",n){const r=Object.keys(oe).includes(e)?e:"en",i=oe.en;let o=ae(oe[r],t)??ae(i,t);if("string"!=typeof o)return t;if(n)for(const[t,e]of Object.entries(n))o=o.replace(new RegExp(`{${t}}`,"g"),e);return o}const ue={flash:{keyframes:[{opacity:1},{opacity:0},{opacity:1},{opacity:0},{opacity:1}],options:{duration:3e3,iterations:1/0}},shakeX:{keyframes:[{transform:"translate3d(0, 0, 0)"},{transform:"translate3d(-5px, 0, 0)"},{transform:"translate3d(5px, 0, 0)"},{transform:"translate3d(-5px, 0, 0)"},{transform:"translate3d(5px, 0, 0)"},{transform:"translate3d(0, 0, 0)"}],options:{duration:800,iterations:1/0}},shakeY:{keyframes:[{transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, -5px, 0)"},{transform:"translate3d(0, 5px, 0)"},{transform:"translate3d(0, -5px, 0)"},{transform:"translate3d(0, 5px, 0)"},{transform:"translate3d(0, 0, 0)"}],options:{duration:800,iterations:1/0}},fadeIn:{keyframes:[{opacity:0},{opacity:1}],options:{duration:2e3,iterations:1/0}},fadeOut:{keyframes:[{opacity:1},{opacity:0}],options:{duration:2e3,iterations:1/0}},zoomIn:{keyframes:[{opacity:0,transform:"scale3d(0.3, 0.3, 0.3)"},{opacity:1,transform:"scale3d(1, 1, 1)"}],options:{duration:2e3,iterations:1/0}},zoomOut:{keyframes:[{opacity:1,transform:"scale3d(1, 1, 1)"},{opacity:0,transform:"scale3d(0.3, 0.3, 0.3)"}],options:{duration:2e3,iterations:1/0}},flipInX:{keyframes:[{transform:"perspective(400px) rotateX(90deg)",opacity:0},{transform:"perspective(400px) rotateX(-20deg)"},{transform:"perspective(400px) rotateX(10deg)",opacity:1},{transform:"perspective(400px) rotateX(0deg)"}],options:{duration:1500,easing:"ease-in",iterations:1/0}},flipOutX:{keyframes:[{transform:"perspective(400px) rotateX(0deg)",opacity:1},{transform:"perspective(400px) rotateX(-20deg)",opacity:1},{transform:"perspective(400px) rotateX(90deg)",opacity:0},{transform:"perspective(400px) rotateX(-20deg)",opacity:1},{transform:"perspective(400px) rotateX(0deg)",opacity:1}],options:{duration:1500,easing:"ease-in",iterations:1/0}},bounce:{keyframes:[{transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, -10px, 0)"},{transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, -2px, 0)"},{transform:"translate3d(0, 0, 0)"}],options:{duration:1e3,easing:"cubic-bezier(.28,.84,.42,1)",iterations:1/0}}};class le extends st{constructor(){super(...arguments),this.theme=lt.BASIC}updated(t){super.updated(t),this._animateArriving()}connectedCallback(){super.connectedCallback(),this._animateArriving()}render(){return this.cardConfig?(this.layout||(this.layout=this.createLayout()),W` <div class="content" theme=${this.theme}>${this.renderContent()} ${this.errors?W`${this._renderErrors()}`:V}</div> `):W`Card configuration is not available!`}_animateArriving(){const t=this.cardConfig?.departureAnimation??"none",e=this.cardConfig?.animateLine??!1;if("none"===t)return;if(!(t in ue))return void console.error("Unknown animation type",t);const n=ue[t];let r;r=e?this.shadowRoot?.querySelectorAll(this.getQueryLineElements()):this.shadowRoot?.querySelectorAll(this.getQueryTimeElements()),r?.forEach((t=>{t.classList.contains("arriving")?0==t.getAnimations().length&&t.animate(n.keyframes,n.options):t.getAnimations().forEach((t=>{t.cancel()}))}))}renderListHeader(){if(!this.cardConfig.showListHeader)return W``;let t=this.layout?.getCells(),e={"grid-template-columns":this.layout?.getColumns()};if(!t)return W``;let n=[];return t.forEach((t=>{switch(t){case ft.ICON:n.push(W`<div class="list-header-icon">${se("card.list-header.icon",this.language)}</div>`);break;case ft.LINE:n.push(W`<div class="list-header-line">${se("card.list-header.line",this.language)}</div>`);break;case ft.DESTINATION:n.push(W`<div class="list-header-destination">${se("card.list-header.destination",this.language)}</div>`);break;case ft.TIME_DIFF:n.push(W`<div class="list-header-time-diff">${se("card.list-header.time-diff",this.language)}</div>`);break;case ft.PLANNED_TIME:n.push(W`<div class="list-header-planned-time">${se("card.list-header.planned-time",this.language)}</div>`);break;case ft.ESTIMATED_TIME:n.push(W`<div class="list-header-estimated-time">${se("card.list-header.estimated-time",this.language)}</div>`);break;case ft.DELAY:n.push(W`<div class="list-header-delay">${se("card.list-header.delay",this.language)}</div>`)}})),W`<div class="list-header">
      <div class="list-header-content" theme=${this.theme} style="${Gt(e)}">${n}</div>
      <hr />
    </div>`}renderDepartureLine(t){let e={arriving:t.time.isArriving(this.cardConfig.arrivalTimeOffset),delayed:t.time.isDelayed,earlier:t.time.isEarlier},n={};const r=this.layout?.getCells();if(!r)return W``;if(n={...n,"grid-template-columns":this.layout?.getColumns()},this.theme===lt.CAPPUCINO)n={...n,borderLeft:`8px solid ${t.lineColor??""}`};let i=[];return r.forEach((e=>{switch(e){case ft.ICON:i.push(this.renderTransportIcon(t));break;case ft.LINE:i.push(this.renderCellLineName(t));break;case ft.DESTINATION:i.push(this.renderCellDestination(t));break;case ft.TIME_DIFF:i.push(this.renderCellTimeDiff(t));break;case ft.PLANNED_TIME:i.push(this.renderCellPlannedTime(t));break;case ft.ESTIMATED_TIME:i.push(this.renderCellEstimatedTime(t));break;case ft.DELAY:i.push(this.renderDelay(t))}})),W` <div class="departure-line  ${qt(e)}" theme=${this.theme} style="${Gt(n)}">${i}</div> `}renderTransportIcon(t){const e=t.icon??Rt;return W`<div class="cell-transport-icon" theme=${this.theme}><ha-icon icon=${e}></ha-icon></div>`}renderCellLineName(t){let e={},n="";switch(t.lineColor&&(n=function(t){const e=t.replace("#","");return e.length<6?"white":(.299*parseInt(e.substring(0,2),16)+.587*parseInt(e.substring(2,4),16)+.114*parseInt(e.substring(4,6),16))/255>.5?"black":"white"}(t.lineColor)),this.theme){case lt.BLUE_OCEAN:case lt.BASIC:e={backgroundColor:t.lineColor,color:n};break;case lt.BLACK_WHITE:e={color:t.lineColor??"white"}}return W`<div><div class="cell-line" theme=${this.theme} style=${Gt(e)}>${t.lineName}</div></div>`}renderCellDestination(t){return W`<div class="cell-destination" theme=${this.theme}>${t.destinationName}</div>`}renderCellPlannedTime(t){const e=t.time.planned,n=e?ie(e,"HH:mm"):"-";return W`<div class="cell-planned-time" theme=${this.theme}>${n}</div>`}renderCellEstimatedTime(t){const e=t.time.estimated,n=e?ie(e,"HH:mm"):"-";return W`<div class="cell-estimated-time" theme=${this.theme}>${n}</div>`}renderCellTimeDiff(t){let e=W``;const n=t.time,r=this.getDepartureIcon()??t.icon??Rt;let i={arriving:n.isArriving(this.cardConfig.arrivalTimeOffset)};return e=0==n.timeDiff?W`<ha-icon icon=${r}></ha-icon>`:n.timeDiff>60?W`${ie(n.time,"HH:mm")}`:W`${n.timeDiff} min`,W`<div><div class="cell-time-diff ${qt(i)}" theme=${this.theme}>${e}</div></div>`}renderDelay(t){let e="";const n=t.time;let r={arriving:t.time.isArriving(this.cardConfig.arrivalTimeOffset),delayed:n.isDelayed,earlier:n.isEarlier};return null!=n.delay&&(n.isDelayed?e=`+${n.delay}`:n.isEarlier&&(e=`${n.delay}`)),W`<div><div class="cell-delay ${qt(r)}" theme=${this.theme}>${e}</div></div>`}getDepartureIcon(){let t=this.cardConfig.departureIcon;if(t&&null!=t&&""!=t)return t}_renderErrors(){return W`
      ${this.errors.map((t=>W`<div class="error">
          <ha-icon icon="mdi:alert"></ha-icon>
          <div>'<span>${t.name}</span>': ${t.message}</div>
        </div>`))}
    `}}le.styles=[gt],t([Bt({attribute:!1})],le.prototype,"departures",void 0),t([Bt({attribute:!1})],le.prototype,"language",void 0),t([Bt({attribute:!1})],le.prototype,"errors",void 0),t([Bt({attribute:!1})],le.prototype,"cardConfig",void 0),t([Bt({attribute:!1})],le.prototype,"theme",void 0);var ce,fe,de="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},he={exports:{}};ce=he,fe=he.exports,function(){var t,e="Expected a function",n="__lodash_hash_undefined__",r="__lodash_placeholder__",i=16,o=32,a=64,s=128,u=256,l=1/0,c=9007199254740991,f=NaN,d=4294967295,h=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",i],["flip",512],["partial",o],["partialRight",a],["rearg",u]],p="[object Arguments]",g="[object Array]",v="[object Boolean]",m="[object Date]",_="[object Error]",y="[object Function]",b="[object GeneratorFunction]",w="[object Map]",E="[object Number]",x="[object Object]",A="[object Promise]",$="[object RegExp]",T="[object Set]",C="[object String]",k="[object Symbol]",S="[object WeakMap]",I="[object ArrayBuffer]",D="[object DataView]",L="[object Float32Array]",N="[object Float64Array]",O="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",R="[object Uint8Array]",z="[object Uint8ClampedArray]",j="[object Uint16Array]",H="[object Uint32Array]",U=/\b__p \+= '';/g,B=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,F=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,Z=RegExp(F.source),q=RegExp(V.source),X=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,G=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt=/[\\^$.*+?()[\]{}|]/g,et=RegExp(tt.source),nt=/^\s+/,rt=/\s/,it=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,st=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,pt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,yt=/['\n\r\u2028\u2029\\]/g,bt="\\ud800-\\udfff",wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",xt="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",$t="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="['’]",kt="["+bt+"]",St="["+Tt+"]",It="["+wt+"]",Dt="\\d+",Lt="["+Et+"]",Nt="["+xt+"]",Ot="[^"+bt+Tt+Dt+Et+xt+At+"]",Pt="\\ud83c[\\udffb-\\udfff]",Mt="[^"+bt+"]",Rt="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+At+"]",Ht="\\u200d",Ut="(?:"+Nt+"|"+Ot+")",Bt="(?:"+jt+"|"+Ot+")",Wt="(?:['’](?:d|ll|m|re|s|t|ve))?",Ft="(?:['’](?:D|LL|M|RE|S|T|VE))?",Vt="(?:"+It+"|"+Pt+")?",Zt="["+$t+"]?",qt=Zt+Vt+"(?:"+Ht+"(?:"+[Mt,Rt,zt].join("|")+")"+Zt+Vt+")*",Xt="(?:"+[Lt,Rt,zt].join("|")+")"+qt,Kt="(?:"+[Mt+It+"?",It,Rt,zt,kt].join("|")+")",Gt=RegExp(Ct,"g"),Yt=RegExp(It,"g"),Jt=RegExp(Pt+"(?="+Pt+")|"+Kt+qt,"g"),Qt=RegExp([jt+"?"+Nt+"+"+Wt+"(?="+[St,jt,"$"].join("|")+")",Bt+"+"+Ft+"(?="+[St,jt+Ut,"$"].join("|")+")",jt+"?"+Ut+"+"+Wt,jt+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt,Xt].join("|"),"g"),te=RegExp("["+Ht+bt+wt+$t+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[L]=ie[N]=ie[O]=ie[P]=ie[M]=ie[R]=ie[z]=ie[j]=ie[H]=!0,ie[p]=ie[g]=ie[I]=ie[v]=ie[D]=ie[m]=ie[_]=ie[y]=ie[w]=ie[E]=ie[x]=ie[$]=ie[T]=ie[C]=ie[S]=!1;var oe={};oe[p]=oe[g]=oe[I]=oe[D]=oe[v]=oe[m]=oe[L]=oe[N]=oe[O]=oe[P]=oe[M]=oe[w]=oe[E]=oe[x]=oe[$]=oe[T]=oe[C]=oe[k]=oe[R]=oe[z]=oe[j]=oe[H]=!0,oe[_]=oe[y]=oe[S]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,ue=parseInt,le="object"==typeof de&&de&&de.Object===Object&&de,he="object"==typeof self&&self&&self.Object===Object&&self,pe=le||he||Function("return this")(),ge=fe&&!fe.nodeType&&fe,ve=ge&&ce&&!ce.nodeType&&ce,me=ve&&ve.exports===ge,_e=me&&le.process,ye=function(){try{var t=ve&&ve.require&&ve.require("util").types;return t||_e&&_e.binding&&_e.binding("util")}catch(t){}}(),be=ye&&ye.isArrayBuffer,we=ye&&ye.isDate,Ee=ye&&ye.isMap,xe=ye&&ye.isRegExp,Ae=ye&&ye.isSet,$e=ye&&ye.isTypedArray;function Te(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Se(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function De(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Le(t,e){return!(null==t||!t.length)&&Be(t,e,0)>-1}function Ne(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Oe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Pe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Me(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Re(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ze(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var je=Ze("length");function He(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Be(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ue(t,Fe,n)}function We(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Fe(t){return t!=t}function Ve(t,e){var n=null==t?0:t.length;return n?Ke(t,e)/n:f}function Ze(e){return function(n){return null==n?t:n[e]}}function qe(e){return function(n){return null==e?t:e[n]}}function Xe(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ke(e,n){for(var r,i=-1,o=e.length;++i<o;){var a=n(e[i]);a!==t&&(r=r===t?a:r+a)}return r}function Ge(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ye(t){return t?t.slice(0,gn(t)+1).replace(nt,""):t}function Je(t){return function(e){return t(e)}}function Qe(t,e){return Oe(e,(function(e){return t[e]}))}function tn(t,e){return t.has(e)}function en(t,e){for(var n=-1,r=t.length;++n<r&&Be(e,t[n],0)>-1;);return n}function nn(t,e){for(var n=t.length;n--&&Be(e,t[n],0)>-1;);return n}var rn=qe({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),on=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(t){return"\\"+ae[t]}function sn(t){return te.test(t)}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ln(t,e){return function(n){return t(e(n))}}function cn(t,e){for(var n=-1,i=t.length,o=0,a=[];++n<i;){var s=t[n];s!==e&&s!==r||(t[n]=r,a[o++]=n)}return a}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function hn(t){return sn(t)?function(t){for(var e=Jt.lastIndex=0;Jt.test(t);)++e;return e}(t):je(t)}function pn(t){return sn(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.split("")}(t)}function gn(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var vn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),mn=function rt(bt){var wt,Et=(bt=null==bt?pe:mn.defaults(pe.Object(),bt,mn.pick(pe,ne))).Array,xt=bt.Date,At=bt.Error,$t=bt.Function,Tt=bt.Math,Ct=bt.Object,kt=bt.RegExp,St=bt.String,It=bt.TypeError,Dt=Et.prototype,Lt=$t.prototype,Nt=Ct.prototype,Ot=bt["__core-js_shared__"],Pt=Lt.toString,Mt=Nt.hasOwnProperty,Rt=0,zt=(wt=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+wt:"",jt=Nt.toString,Ht=Pt.call(Ct),Ut=pe._,Bt=kt("^"+Pt.call(Mt).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=me?bt.Buffer:t,Ft=bt.Symbol,Vt=bt.Uint8Array,Zt=Wt?Wt.allocUnsafe:t,qt=ln(Ct.getPrototypeOf,Ct),Xt=Ct.create,Kt=Nt.propertyIsEnumerable,Jt=Dt.splice,te=Ft?Ft.isConcatSpreadable:t,ae=Ft?Ft.iterator:t,le=Ft?Ft.toStringTag:t,ce=function(){try{var t=ho(Ct,"defineProperty");return t({},"",{}),t}catch(t){}}(),fe=bt.clearTimeout!==pe.clearTimeout&&bt.clearTimeout,de=xt&&xt.now!==pe.Date.now&&xt.now,he=bt.setTimeout!==pe.setTimeout&&bt.setTimeout,ge=Tt.ceil,ve=Tt.floor,_e=Ct.getOwnPropertySymbols,ye=Wt?Wt.isBuffer:t,je=bt.isFinite,qe=Dt.join,_n=ln(Ct.keys,Ct),yn=Tt.max,bn=Tt.min,wn=xt.now,En=bt.parseInt,xn=Tt.random,An=Dt.reverse,$n=ho(bt,"DataView"),Tn=ho(bt,"Map"),Cn=ho(bt,"Promise"),kn=ho(bt,"Set"),Sn=ho(bt,"WeakMap"),In=ho(Ct,"create"),Dn=Sn&&new Sn,Ln={},Nn=jo($n),On=jo(Tn),Pn=jo(Cn),Mn=jo(kn),Rn=jo(Sn),zn=Ft?Ft.prototype:t,jn=zn?zn.valueOf:t,Hn=zn?zn.toString:t;function Un(t){if(ns(t)&&!Va(t)&&!(t instanceof Vn)){if(t instanceof Fn)return t;if(Mt.call(t,"__wrapped__"))return Ho(t)}return new Fn(t)}var Bn=function(){function e(){}return function(n){if(!es(n))return{};if(Xt)return Xt(n);e.prototype=n;var r=new e;return e.prototype=t,r}}();function Wn(){}function Fn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Xn;++e<n;)this.add(t[e])}function Gn(t){var e=this.__data__=new qn(t);this.size=e.size}function Yn(t,e){var n=Va(t),r=!n&&Fa(t),i=!n&&!r&&Ka(t),o=!n&&!r&&!i&&cs(t),a=n||r||i||o,s=a?Ge(t.length,St):[],u=s.length;for(var l in t)!e&&!Mt.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||bo(l,u))||s.push(l);return s}function Jn(e){var n=e.length;return n?e[Kr(0,n-1)]:t}function Qn(t,e){return Mo(Ii(t),ur(e,0,t.length))}function tr(t){return Mo(Ii(t))}function er(e,n,r){(r!==t&&!Ua(e[n],r)||r===t&&!(n in e))&&ar(e,n,r)}function nr(e,n,r){var i=e[n];Mt.call(e,n)&&Ua(i,r)&&(r!==t||n in e)||ar(e,n,r)}function rr(t,e){for(var n=t.length;n--;)if(Ua(t[n][0],e))return n;return-1}function ir(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function or(t,e){return t&&Di(e,Ls(e),t)}function ar(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(e,n){for(var r=-1,i=n.length,o=Et(i),a=null==e;++r<i;)o[r]=a?t:Cs(e,n[r]);return o}function ur(e,n,r){return e==e&&(r!==t&&(e=e<=r?e:r),n!==t&&(e=e>=n?e:n)),e}function lr(e,n,r,i,o,a){var s,u=1&n,l=2&n,c=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),s!==t)return s;if(!es(e))return e;var f=Va(e);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return Ii(e,s)}else{var d=vo(e),h=d==y||d==b;if(Ka(e))return Ai(e,u);if(d==x||d==p||h&&!o){if(s=l||h?{}:_o(e),!u)return l?function(t,e){return Di(t,go(t),e)}(e,function(t,e){return t&&Di(e,Ns(e),t)}(s,e)):function(t,e){return Di(t,po(t),e)}(e,or(s,e))}else{if(!oe[d])return o?e:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case I:return $i(t);case v:case m:return new i(+t);case D:return function(t,e){var n=e?$i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case N:case O:case P:case M:case R:case z:case j:case H:return Ti(t,n);case w:return new i;case E:case C:return new i(t);case $:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case T:return new i;case k:return r=t,jn?Ct(jn.call(r)):{}}}(e,d,u)}}a||(a=new Gn);var g=a.get(e);if(g)return g;a.set(e,s),ss(e)?e.forEach((function(t){s.add(lr(t,n,r,t,e,a))})):rs(e)&&e.forEach((function(t,i){s.set(i,lr(t,n,r,i,e,a))}));var _=f?t:(c?l?oo:io:l?Ns:Ls)(e);return ke(_||e,(function(t,i){_&&(t=e[i=t]),nr(s,i,lr(t,n,r,i,e,a))})),s}function cr(e,n,r){var i=r.length;if(null==e)return!i;for(e=Ct(e);i--;){var o=r[i],a=n[o],s=e[o];if(s===t&&!(o in e)||!a(s))return!1}return!0}function fr(n,r,i){if("function"!=typeof n)throw new It(e);return Lo((function(){n.apply(t,i)}),r)}function dr(t,e,n,r){var i=-1,o=Le,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=Oe(e,Je(n))),r?(o=Ne,a=!1):e.length>=200&&(o=tn,a=!1,e=new Kn(e));t:for(;++i<s;){var c=t[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var d=l;d--;)if(e[d]===f)continue t;u.push(c)}else o(e,f,r)||u.push(c)}return u}Un.templateSettings={escape:X,evaluate:K,interpolate:G,variable:"",imports:{_:Un}},Un.prototype=Wn.prototype,Un.prototype.constructor=Un,Fn.prototype=Bn(Wn.prototype),Fn.prototype.constructor=Fn,Vn.prototype=Bn(Wn.prototype),Vn.prototype.constructor=Vn,Zn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Zn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Zn.prototype.get=function(e){var r=this.__data__;if(In){var i=r[e];return i===n?t:i}return Mt.call(r,e)?r[e]:t},Zn.prototype.has=function(e){var n=this.__data__;return In?n[e]!==t:Mt.call(n,e)},Zn.prototype.set=function(e,r){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=In&&r===t?n:r,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0||(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,0))},qn.prototype.get=function(e){var n=this.__data__,r=rr(n,e);return r<0?t:n[r][1]},qn.prototype.has=function(t){return rr(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new Zn,map:new(Tn||qn),string:new Zn}},Xn.prototype.delete=function(t){var e=co(this,t).delete(t);return this.size-=e?1:0,e},Xn.prototype.get=function(t){return co(this,t).get(t)},Xn.prototype.has=function(t){return co(this,t).has(t)},Xn.prototype.set=function(t,e){var n=co(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,n),this},Kn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.clear=function(){this.__data__=new qn,this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Gn.prototype.get=function(t){return this.__data__.get(t)},Gn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(t,e),this.size=n.size,this};var hr=Oi(wr),pr=Oi(Er,!0);function gr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function vr(e,n,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=n(a);if(null!=s&&(u===t?s==s&&!ls(s):r(s,u)))var u=s,l=a}return l}function mr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function _r(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=yo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?_r(s,e-1,n,r,i):Pe(i,s):r||(i[i.length]=s)}return i}var yr=Pi(),br=Pi(!0);function wr(t,e){return t&&yr(t,e,Ls)}function Er(t,e){return t&&br(t,e,Ls)}function xr(t,e){return De(e,(function(e){return Ja(t[e])}))}function Ar(e,n){for(var r=0,i=(n=bi(n,e)).length;null!=e&&r<i;)e=e[zo(n[r++])];return r&&r==i?e:t}function $r(t,e,n){var r=e(t);return Va(t)?r:Pe(r,n(t))}function Tr(e){return null==e?e===t?"[object Undefined]":"[object Null]":le&&le in Ct(e)?function(e){var n=Mt.call(e,le),r=e[le];try{e[le]=t;var i=!0}catch(t){}var o=jt.call(e);return i&&(n?e[le]=r:delete e[le]),o}(e):function(t){return jt.call(t)}(e)}function Cr(t,e){return t>e}function kr(t,e){return null!=t&&Mt.call(t,e)}function Sr(t,e){return null!=t&&e in Ct(t)}function Ir(e,n,r){for(var i=r?Ne:Le,o=e[0].length,a=e.length,s=a,u=Et(a),l=1/0,c=[];s--;){var f=e[s];s&&n&&(f=Oe(f,Je(n))),l=bn(f.length,l),u[s]=!r&&(n||o>=120&&f.length>=120)?new Kn(s&&f):t}f=e[0];var d=-1,h=u[0];t:for(;++d<o&&c.length<l;){var p=f[d],g=n?n(p):p;if(p=r||0!==p?p:0,!(h?tn(h,g):i(c,g,r))){for(s=a;--s;){var v=u[s];if(!(v?tn(v,g):i(e[s],g,r)))continue t}h&&h.push(g),c.push(p)}}return c}function Dr(e,n,r){var i=null==(e=So(e,n=bi(n,e)))?e:e[zo(Yo(n))];return null==i?t:Te(i,e,r)}function Lr(t){return ns(t)&&Tr(t)==p}function Nr(e,n,r,i,o){return e===n||(null==e||null==n||!ns(e)&&!ns(n)?e!=e&&n!=n:function(e,n,r,i,o,a){var s=Va(e),u=Va(n),l=s?g:vo(e),c=u?g:vo(n),f=(l=l==p?x:l)==x,d=(c=c==p?x:c)==x,h=l==c;if(h&&Ka(e)){if(!Ka(n))return!1;s=!0,f=!1}if(h&&!f)return a||(a=new Gn),s||cs(e)?no(e,n,r,i,o,a):function(t,e,n,r,i,o,a){switch(n){case D:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case I:return!(t.byteLength!=e.byteLength||!o(new Vt(t),new Vt(e)));case v:case m:case E:return Ua(+t,+e);case _:return t.name==e.name&&t.message==e.message;case $:case C:return t==e+"";case w:var s=un;case T:var u=1&r;if(s||(s=fn),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=no(s(t),s(e),r,i,o,a);return a.delete(t),c;case k:if(jn)return jn.call(t)==jn.call(e)}return!1}(e,n,l,r,i,o,a);if(!(1&r)){var y=f&&Mt.call(e,"__wrapped__"),b=d&&Mt.call(n,"__wrapped__");if(y||b){var A=y?e.value():e,S=b?n.value():n;return a||(a=new Gn),o(A,S,r,i,a)}}return!!h&&(a||(a=new Gn),function(e,n,r,i,o,a){var s=1&r,u=io(e),l=u.length,c=io(n),f=c.length;if(l!=f&&!s)return!1;for(var d=l;d--;){var h=u[d];if(!(s?h in n:Mt.call(n,h)))return!1}var p=a.get(e),g=a.get(n);if(p&&g)return p==n&&g==e;var v=!0;a.set(e,n),a.set(n,e);for(var m=s;++d<l;){var _=e[h=u[d]],y=n[h];if(i)var b=s?i(y,_,h,n,e,a):i(_,y,h,e,n,a);if(!(b===t?_===y||o(_,y,r,i,a):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var w=e.constructor,E=n.constructor;w==E||!("constructor"in e)||!("constructor"in n)||"function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E||(v=!1)}return a.delete(e),a.delete(n),v}(e,n,r,i,o,a))}(e,n,r,i,Nr,o))}function Or(e,n,r,i){var o=r.length,a=o,s=!i;if(null==e)return!a;for(e=Ct(e);o--;){var u=r[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var l=(u=r[o])[0],c=e[l],f=u[1];if(s&&u[2]){if(c===t&&!(l in e))return!1}else{var d=new Gn;if(i)var h=i(c,f,l,e,n,d);if(!(h===t?Nr(f,c,3,i,d):h))return!1}}return!0}function Pr(t){return!(!es(t)||(e=t,zt&&zt in e))&&(Ja(t)?Bt:pt).test(jo(t));var e}function Mr(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?Va(t)?Br(t[0],t[1]):Ur(t):hu(t)}function Rr(t){if(!$o(t))return _n(t);var e=[];for(var n in Ct(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function zr(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=$o(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}function jr(t,e){return t<e}function Hr(t,e){var n=-1,r=qa(t)?Et(t.length):[];return hr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Ur(t){var e=fo(t);return 1==e.length&&e[0][2]?Co(e[0][0],e[0][1]):function(n){return n===t||Or(n,t,e)}}function Br(e,n){return Eo(e)&&To(n)?Co(zo(e),n):function(r){var i=Cs(r,e);return i===t&&i===n?ks(r,e):Nr(n,i,3)}}function Wr(e,n,r,i,o){e!==n&&yr(n,(function(a,s){if(o||(o=new Gn),es(a))!function(e,n,r,i,o,a,s){var u=Io(e,r),l=Io(n,r),c=s.get(l);if(c)er(e,r,c);else{var f=a?a(u,l,r+"",e,n,s):t,d=f===t;if(d){var h=Va(l),p=!h&&Ka(l),g=!h&&!p&&cs(l);f=l,h||p||g?Va(u)?f=u:Xa(u)?f=Ii(u):p?(d=!1,f=Ai(l,!0)):g?(d=!1,f=Ti(l,!0)):f=[]:os(l)||Fa(l)?(f=u,Fa(u)?f=_s(u):es(u)&&!Ja(u)||(f=_o(l))):d=!1}d&&(s.set(l,f),o(f,l,i,a,s),s.delete(l)),er(e,r,f)}}(e,n,s,r,Wr,i,o);else{var u=i?i(Io(e,s),a,s+"",e,n,o):t;u===t&&(u=a),er(e,s,u)}}),Ns)}function Fr(e,n){var r=e.length;if(r)return bo(n+=n<0?r:0,r)?e[n]:t}function Vr(t,e,n){e=e.length?Oe(e,(function(t){return Va(t)?function(e){return Ar(e,1===t.length?t[0]:t)}:t})):[iu];var r=-1;e=Oe(e,Je(lo()));var i=Hr(t,(function(t,n,i){var o=Oe(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Ci(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Zr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Ar(t,a);n(s,a)&&ti(o,bi(a,t),s)}return o}function qr(t,e,n,r){var i=r?We:Be,o=-1,a=e.length,s=t;for(t===e&&(e=Ii(e)),n&&(s=Oe(t,Je(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Jt.call(s,u,1),Jt.call(t,u,1);return t}function Xr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;bo(i)?Jt.call(t,i,1):di(t,i)}}return t}function Kr(t,e){return t+ve(xn()*(e-t+1))}function Gr(t,e){var n="";if(!t||e<1||e>c)return n;do{e%2&&(n+=t),(e=ve(e/2))&&(t+=t)}while(e);return n}function Yr(t,e){return No(ko(t,e,iu),t+"")}function Jr(t){return Jn(Us(t))}function Qr(t,e){var n=Us(t);return Mo(n,ur(e,0,n.length))}function ti(e,n,r,i){if(!es(e))return e;for(var o=-1,a=(n=bi(n,e)).length,s=a-1,u=e;null!=u&&++o<a;){var l=zo(n[o]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var f=u[l];(c=i?i(f,l,u):t)===t&&(c=es(f)?f:bo(n[o+1])?[]:{})}nr(u,l,c),u=u[l]}return e}var ei=Dn?function(t,e){return Dn.set(t,e),t}:iu,ni=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ri(t){return Mo(Us(t))}function ii(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Et(i);++r<i;)o[r]=t[r+e];return o}function oi(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ls(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return si(t,e,iu,n)}function si(e,n,r,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(n=r(n))!=n,u=null===n,l=ls(n),c=n===t;o<a;){var f=ve((o+a)/2),d=r(e[f]),h=d!==t,p=null===d,g=d==d,v=ls(d);if(s)var m=i||g;else m=c?g&&(i||h):u?g&&h&&(i||!p):l?g&&h&&!p&&(i||!v):!p&&!v&&(i?d<=n:d<n);m?o=f+1:a=f}return bn(a,4294967294)}function ui(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ua(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function li(t){return"number"==typeof t?t:ls(t)?f:+t}function ci(t){if("string"==typeof t)return t;if(Va(t))return Oe(t,ci)+"";if(ls(t))return Hn?Hn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function fi(t,e,n){var r=-1,i=Le,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Ne;else if(o>=200){var l=e?null:Gi(t);if(l)return fn(l);a=!1,i=tn,u=new Kn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue t;e&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function di(t,e){return null==(t=So(t,e=bi(e,t)))||delete t[zo(Yo(e))]}function hi(t,e,n,r){return ti(t,e,n(Ar(t,e)),r)}function pi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ii(t,r?0:o,r?o+1:i):ii(t,r?o+1:0,r?i:o)}function gi(t,e){var n=t;return n instanceof Vn&&(n=n.value()),Me(e,(function(t,e){return e.func.apply(e.thisArg,Pe([t],e.args))}),n)}function vi(t,e,n){var r=t.length;if(r<2)return r?fi(t[0]):[];for(var i=-1,o=Et(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=dr(o[i]||a,t[s],e,n));return fi(_r(o,1),e,n)}function mi(e,n,r){for(var i=-1,o=e.length,a=n.length,s={};++i<o;){var u=i<a?n[i]:t;r(s,e[i],u)}return s}function _i(t){return Xa(t)?t:[]}function yi(t){return"function"==typeof t?t:iu}function bi(t,e){return Va(t)?t:Eo(t,e)?[t]:Ro(ys(t))}var wi=Yr;function Ei(e,n,r){var i=e.length;return r=r===t?i:r,!n&&r>=i?e:ii(e,n,r)}var xi=fe||function(t){return pe.clearTimeout(t)};function Ai(t,e){if(e)return t.slice();var n=t.length,r=Zt?Zt(n):new t.constructor(n);return t.copy(r),r}function $i(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function Ti(t,e){var n=e?$i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ci(e,n){if(e!==n){var r=e!==t,i=null===e,o=e==e,a=ls(e),s=n!==t,u=null===n,l=n==n,c=ls(n);if(!u&&!c&&!a&&e>n||a&&s&&l&&!u&&!c||i&&s&&l||!r&&l||!o)return 1;if(!i&&!a&&!c&&e<n||c&&r&&o&&!i&&!a||u&&r&&o||!s&&o||!l)return-1}return 0}function ki(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=yn(o-a,0),c=Et(u+l),f=!r;++s<u;)c[s]=e[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function Si(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=yn(o-s,0),f=Et(c+l),d=!r;++i<c;)f[i]=t[i];for(var h=i;++u<l;)f[h+u]=e[u];for(;++a<s;)(d||i<o)&&(f[h+n[a]]=t[i++]);return f}function Ii(t,e){var n=-1,r=t.length;for(e||(e=Et(r));++n<r;)e[n]=t[n];return e}function Di(e,n,r,i){var o=!r;r||(r={});for(var a=-1,s=n.length;++a<s;){var u=n[a],l=i?i(r[u],e[u],u,r,e):t;l===t&&(l=e[u]),o?ar(r,u,l):nr(r,u,l)}return r}function Li(t,e){return function(n,r){var i=Va(n)?Ce:ir,o=e?e():{};return i(n,t,lo(r,2),o)}}function Ni(e){return Yr((function(n,r){var i=-1,o=r.length,a=o>1?r[o-1]:t,s=o>2?r[2]:t;for(a=e.length>3&&"function"==typeof a?(o--,a):t,s&&wo(r[0],r[1],s)&&(a=o<3?t:a,o=1),n=Ct(n);++i<o;){var u=r[i];u&&e(n,u,i,a)}return n}))}function Oi(t,e){return function(n,r){if(null==n)return n;if(!qa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Ct(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Pi(t){return function(e,n,r){for(var i=-1,o=Ct(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Mi(e){return function(n){var r=sn(n=ys(n))?pn(n):t,i=r?r[0]:n.charAt(0),o=r?Ei(r,1).join(""):n.slice(1);return i[e]()+o}}function Ri(t){return function(e){return Me(Js(Fs(e).replace(Gt,"")),t,"")}}function zi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Bn(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function ji(e){return function(n,r,i){var o=Ct(n);if(!qa(n)){var a=lo(r,3);n=Ls(n),r=function(t){return a(o[t],t,o)}}var s=e(n,r,i);return s>-1?o[a?n[s]:s]:t}}function Hi(n){return ro((function(r){var i=r.length,o=i,a=Fn.prototype.thru;for(n&&r.reverse();o--;){var s=r[o];if("function"!=typeof s)throw new It(e);if(a&&!u&&"wrapper"==so(s))var u=new Fn([],!0)}for(o=u?o:i;++o<i;){var l=so(s=r[o]),c="wrapper"==l?ao(s):t;u=c&&xo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[so(c[0])].apply(u,c[3]):1==s.length&&xo(s)?u[l]():u.thru(s)}return function(){var t=arguments,e=t[0];if(u&&1==t.length&&Va(e))return u.plant(e).value();for(var n=0,o=i?r[n].apply(this,t):e;++n<i;)o=r[n].call(this,o);return o}}))}function Ui(e,n,r,i,o,a,u,l,c,f){var d=n&s,h=1&n,p=2&n,g=24&n,v=512&n,m=p?t:zi(e);return function s(){for(var _=arguments.length,y=Et(_),b=_;b--;)y[b]=arguments[b];if(g)var w=uo(s),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(y,w);if(i&&(y=ki(y,i,o,g)),a&&(y=Si(y,a,u,g)),_-=E,g&&_<f){var x=cn(y,w);return Xi(e,n,Ui,s.placeholder,r,y,x,l,c,f-_)}var A=h?r:this,$=p?A[e]:e;return _=y.length,l?y=function(e,n){for(var r=e.length,i=bn(n.length,r),o=Ii(e);i--;){var a=n[i];e[i]=bo(a,r)?o[a]:t}return e}(y,l):v&&_>1&&y.reverse(),d&&c<_&&(y.length=c),this&&this!==pe&&this instanceof s&&($=m||zi($)),$.apply(A,y)}}function Bi(t,e){return function(n,r){return function(t,e,n,r){return wr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Wi(e,n){return function(r,i){var o;if(r===t&&i===t)return n;if(r!==t&&(o=r),i!==t){if(o===t)return i;"string"==typeof r||"string"==typeof i?(r=ci(r),i=ci(i)):(r=li(r),i=li(i)),o=e(r,i)}return o}}function Fi(t){return ro((function(e){return e=Oe(e,Je(lo())),Yr((function(n){var r=this;return t(e,(function(t){return Te(t,r,n)}))}))}))}function Vi(e,n){var r=(n=n===t?" ":ci(n)).length;if(r<2)return r?Gr(n,e):n;var i=Gr(n,ge(e/hn(n)));return sn(n)?Ei(pn(i),0,e).join(""):i.slice(0,e)}function Zi(e){return function(n,r,i){return i&&"number"!=typeof i&&wo(n,r,i)&&(r=i=t),n=ps(n),r===t?(r=n,n=0):r=ps(r),function(t,e,n,r){for(var i=-1,o=yn(ge((e-t)/(n||1)),0),a=Et(o);o--;)a[r?o:++i]=t,t+=n;return a}(n,r,i=i===t?n<r?1:-1:ps(i),e)}}function qi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ms(e),n=ms(n)),t(e,n)}}function Xi(e,n,r,i,s,u,l,c,f,d){var h=8&n;n|=h?o:a,4&(n&=~(h?a:o))||(n&=-4);var p=[e,n,s,h?u:t,h?l:t,h?t:u,h?t:l,c,f,d],g=r.apply(t,p);return xo(e)&&Do(g,p),g.placeholder=i,Oo(g,e,n)}function Ki(t){var e=Tt[t];return function(t,n){if(t=ms(t),(n=null==n?0:bn(gs(n),292))&&je(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Gi=kn&&1/fn(new kn([,-0]))[1]==l?function(t){return new kn(t)}:lu;function Yi(t){return function(e){var n=vo(e);return n==w?un(e):n==T?dn(e):function(t,e){return Oe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ji(n,l,c,f,d,h,p,g){var v=2&l;if(!v&&"function"!=typeof n)throw new It(e);var m=f?f.length:0;if(m||(l&=-97,f=d=t),p=p===t?p:yn(gs(p),0),g=g===t?g:gs(g),m-=d?d.length:0,l&a){var _=f,y=d;f=d=t}var b=v?t:ao(n),w=[n,l,c,f,d,_,y,h,p,g];if(b&&function(t,e){var n=t[1],i=e[1],o=n|i,a=o<131,l=i==s&&8==n||i==s&&n==u&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!a&&!l)return t;1&i&&(t[2]=e[2],o|=1&n?0:4);var c=e[3];if(c){var f=t[3];t[3]=f?ki(f,c,e[4]):c,t[4]=f?cn(t[3],r):e[4]}(c=e[5])&&(f=t[5],t[5]=f?Si(f,c,e[6]):c,t[6]=f?cn(t[5],r):e[6]),(c=e[7])&&(t[7]=c),i&s&&(t[8]=null==t[8]?e[8]:bn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(w,b),n=w[0],l=w[1],c=w[2],f=w[3],d=w[4],!(g=w[9]=w[9]===t?v?0:n.length:yn(w[9]-m,0))&&24&l&&(l&=-25),l&&1!=l)E=8==l||l==i?function(e,n,r){var i=zi(e);return function o(){for(var a=arguments.length,s=Et(a),u=a,l=uo(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:cn(s,l);return(a-=c.length)<r?Xi(e,n,Ui,o.placeholder,t,s,c,t,t,r-a):Te(this&&this!==pe&&this instanceof o?i:e,this,s)}}(n,l,g):l!=o&&33!=l||d.length?Ui.apply(t,w):function(t,e,n,r){var i=1&e,o=zi(t);return function e(){for(var a=-1,s=arguments.length,u=-1,l=r.length,c=Et(l+s),f=this&&this!==pe&&this instanceof e?o:t;++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++a];return Te(f,i?n:this,c)}}(n,l,c,f);else var E=function(t,e,n){var r=1&e,i=zi(t);return function e(){return(this&&this!==pe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(n,l,c);return Oo((b?ei:Do)(E,w),n,l)}function Qi(e,n,r,i){return e===t||Ua(e,Nt[r])&&!Mt.call(i,r)?n:e}function to(e,n,r,i,o,a){return es(e)&&es(n)&&(a.set(n,e),Wr(e,n,t,to,a),a.delete(n)),e}function eo(e){return os(e)?t:e}function no(e,n,r,i,o,a){var s=1&r,u=e.length,l=n.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e),f=a.get(n);if(c&&f)return c==n&&f==e;var d=-1,h=!0,p=2&r?new Kn:t;for(a.set(e,n),a.set(n,e);++d<u;){var g=e[d],v=n[d];if(i)var m=s?i(v,g,d,n,e,a):i(g,v,d,e,n,a);if(m!==t){if(m)continue;h=!1;break}if(p){if(!ze(n,(function(t,e){if(!tn(p,e)&&(g===t||o(g,t,r,i,a)))return p.push(e)}))){h=!1;break}}else if(g!==v&&!o(g,v,r,i,a)){h=!1;break}}return a.delete(e),a.delete(n),h}function ro(e){return No(ko(e,t,Zo),e+"")}function io(t){return $r(t,Ls,po)}function oo(t){return $r(t,Ns,go)}var ao=Dn?function(t){return Dn.get(t)}:lu;function so(t){for(var e=t.name+"",n=Ln[e],r=Mt.call(Ln,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function uo(t){return(Mt.call(Un,"placeholder")?Un:t).placeholder}function lo(){var t=Un.iteratee||ou;return t=t===ou?Mr:t,arguments.length?t(arguments[0],arguments[1]):t}function co(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function fo(t){for(var e=Ls(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,To(i)]}return e}function ho(e,n){var r=function(e,n){return null==e?t:e[n]}(e,n);return Pr(r)?r:t}var po=_e?function(t){return null==t?[]:(t=Ct(t),De(_e(t),(function(e){return Kt.call(t,e)})))}:vu,go=_e?function(t){for(var e=[];t;)Pe(e,po(t)),t=qt(t);return e}:vu,vo=Tr;function mo(t,e,n){for(var r=-1,i=(e=bi(e,t)).length,o=!1;++r<i;){var a=zo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ts(i)&&bo(a,i)&&(Va(t)||Fa(t))}function _o(t){return"function"!=typeof t.constructor||$o(t)?{}:Bn(qt(t))}function yo(t){return Va(t)||Fa(t)||!!(te&&t&&t[te])}function bo(t,e){var n=typeof t;return!!(e=null==e?c:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e}function wo(t,e,n){if(!es(n))return!1;var r=typeof e;return!!("number"==r?qa(n)&&bo(e,n.length):"string"==r&&e in n)&&Ua(n[e],t)}function Eo(t,e){if(Va(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ls(t))||J.test(t)||!Y.test(t)||null!=e&&t in Ct(e)}function xo(t){var e=so(t),n=Un[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var r=ao(n);return!!r&&t===r[0]}($n&&vo(new $n(new ArrayBuffer(1)))!=D||Tn&&vo(new Tn)!=w||Cn&&vo(Cn.resolve())!=A||kn&&vo(new kn)!=T||Sn&&vo(new Sn)!=S)&&(vo=function(e){var n=Tr(e),r=n==x?e.constructor:t,i=r?jo(r):"";if(i)switch(i){case Nn:return D;case On:return w;case Pn:return A;case Mn:return T;case Rn:return S}return n});var Ao=Ot?Ja:mu;function $o(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Nt)}function To(t){return t==t&&!es(t)}function Co(e,n){return function(r){return null!=r&&r[e]===n&&(n!==t||e in Ct(r))}}function ko(e,n,r){return n=yn(n===t?e.length-1:n,0),function(){for(var t=arguments,i=-1,o=yn(t.length-n,0),a=Et(o);++i<o;)a[i]=t[n+i];i=-1;for(var s=Et(n+1);++i<n;)s[i]=t[i];return s[n]=r(a),Te(e,this,s)}}function So(t,e){return e.length<2?t:Ar(t,ii(e,0,-1))}function Io(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Do=Po(ei),Lo=he||function(t,e){return pe.setTimeout(t,e)},No=Po(ni);function Oo(t,e,n){var r=e+"";return No(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(it,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ke(h,(function(n){var r="_."+n[0];e&n[1]&&!Le(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(at):[]}(r),n)))}function Po(e){var n=0,r=0;return function(){var i=wn(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function Mo(e,n){var r=-1,i=e.length,o=i-1;for(n=n===t?i:n;++r<n;){var a=Kr(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=n,e}var Ro=function(t){var e=Pa(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Q,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}));function zo(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jo(t){if(null!=t){try{return Pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ho(t){if(t instanceof Vn)return t.clone();var e=new Fn(t.__wrapped__,t.__chain__);return e.__actions__=Ii(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Uo=Yr((function(t,e){return Xa(t)?dr(t,_r(e,1,Xa,!0)):[]})),Bo=Yr((function(e,n){var r=Yo(n);return Xa(r)&&(r=t),Xa(e)?dr(e,_r(n,1,Xa,!0),lo(r,2)):[]})),Wo=Yr((function(e,n){var r=Yo(n);return Xa(r)&&(r=t),Xa(e)?dr(e,_r(n,1,Xa,!0),t,r):[]}));function Fo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=yn(r+i,0)),Ue(t,lo(e,3),i)}function Vo(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==t&&(o=gs(r),o=r<0?yn(i+o,0):bn(o,i-1)),Ue(e,lo(n,3),o,!0)}function Zo(t){return null!=t&&t.length?_r(t,1):[]}function qo(e){return e&&e.length?e[0]:t}var Xo=Yr((function(t){var e=Oe(t,_i);return e.length&&e[0]===t[0]?Ir(e):[]})),Ko=Yr((function(e){var n=Yo(e),r=Oe(e,_i);return n===Yo(r)?n=t:r.pop(),r.length&&r[0]===e[0]?Ir(r,lo(n,2)):[]})),Go=Yr((function(e){var n=Yo(e),r=Oe(e,_i);return(n="function"==typeof n?n:t)&&r.pop(),r.length&&r[0]===e[0]?Ir(r,t,n):[]}));function Yo(e){var n=null==e?0:e.length;return n?e[n-1]:t}var Jo=Yr(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?qr(t,e):t}var ta=ro((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return Xr(t,Oe(e,(function(t){return bo(t,n)?+t:t})).sort(Ci)),r}));function ea(t){return null==t?t:An.call(t)}var na=Yr((function(t){return fi(_r(t,1,Xa,!0))})),ra=Yr((function(e){var n=Yo(e);return Xa(n)&&(n=t),fi(_r(e,1,Xa,!0),lo(n,2))})),ia=Yr((function(e){var n=Yo(e);return n="function"==typeof n?n:t,fi(_r(e,1,Xa,!0),t,n)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=De(t,(function(t){if(Xa(t))return e=yn(t.length,e),!0})),Ge(e,(function(e){return Oe(t,Ze(e))}))}function aa(e,n){if(!e||!e.length)return[];var r=oa(e);return null==n?r:Oe(r,(function(e){return Te(n,t,e)}))}var sa=Yr((function(t,e){return Xa(t)?dr(t,e):[]})),ua=Yr((function(t){return vi(De(t,Xa))})),la=Yr((function(e){var n=Yo(e);return Xa(n)&&(n=t),vi(De(e,Xa),lo(n,2))})),ca=Yr((function(e){var n=Yo(e);return n="function"==typeof n?n:t,vi(De(e,Xa),t,n)})),fa=Yr(oa),da=Yr((function(e){var n=e.length,r=n>1?e[n-1]:t;return r="function"==typeof r?(e.pop(),r):t,aa(e,r)}));function ha(t){var e=Un(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var ga=ro((function(e){var n=e.length,r=n?e[0]:0,i=this.__wrapped__,o=function(t){return sr(t,e)};return!(n>1||this.__actions__.length)&&i instanceof Vn&&bo(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:pa,args:[o],thisArg:t}),new Fn(i,this.__chain__).thru((function(e){return n&&!e.length&&e.push(t),e}))):this.thru(o)})),va=Li((function(t,e,n){Mt.call(t,n)?++t[n]:ar(t,n,1)})),ma=ji(Fo),_a=ji(Vo);function ya(t,e){return(Va(t)?ke:hr)(t,lo(e,3))}function ba(t,e){return(Va(t)?Se:pr)(t,lo(e,3))}var wa=Li((function(t,e,n){Mt.call(t,n)?t[n].push(e):ar(t,n,[e])})),Ea=Yr((function(t,e,n){var r=-1,i="function"==typeof e,o=qa(t)?Et(t.length):[];return hr(t,(function(t){o[++r]=i?Te(e,t,n):Dr(t,e,n)})),o})),xa=Li((function(t,e,n){ar(t,n,e)}));function Aa(t,e){return(Va(t)?Oe:Hr)(t,lo(e,3))}var $a=Li((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ta=Yr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&wo(t,e[0],e[1])?e=[]:n>2&&wo(e[0],e[1],e[2])&&(e=[e[0]]),Vr(t,_r(e,1),[])})),Ca=de||function(){return pe.Date.now()};function ka(e,n,r){return n=r?t:n,n=e&&null==n?e.length:n,Ji(e,s,t,t,t,t,n)}function Sa(n,r){var i;if("function"!=typeof r)throw new It(e);return n=gs(n),function(){return--n>0&&(i=r.apply(this,arguments)),n<=1&&(r=t),i}}var Ia=Yr((function(t,e,n){var r=1;if(n.length){var i=cn(n,uo(Ia));r|=o}return Ji(t,r,e,n,i)})),Da=Yr((function(t,e,n){var r=3;if(n.length){var i=cn(n,uo(Da));r|=o}return Ji(e,r,t,n,i)}));function La(n,r,i){var o,a,s,u,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof n)throw new It(e);function g(e){var r=o,i=a;return o=a=t,f=e,u=n.apply(i,r)}function v(e){var n=e-c;return c===t||n>=r||n<0||h&&e-f>=s}function m(){var t=Ca();if(v(t))return _(t);l=Lo(m,function(t){var e=r-(t-c);return h?bn(e,s-(t-f)):e}(t))}function _(e){return l=t,p&&o?g(e):(o=a=t,u)}function y(){var e=Ca(),n=v(e);if(o=arguments,a=this,c=e,n){if(l===t)return function(t){return f=t,l=Lo(m,r),d?g(t):u}(c);if(h)return xi(l),l=Lo(m,r),g(c)}return l===t&&(l=Lo(m,r)),u}return r=ms(r)||0,es(i)&&(d=!!i.leading,s=(h="maxWait"in i)?yn(ms(i.maxWait)||0,r):s,p="trailing"in i?!!i.trailing:p),y.cancel=function(){l!==t&&xi(l),f=0,o=c=a=l=t},y.flush=function(){return l===t?u:_(Ca())},y}var Na=Yr((function(t,e){return fr(t,1,e)})),Oa=Yr((function(t,e,n){return fr(t,ms(e)||0,n)}));function Pa(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new It(e);var r=function(){var e=arguments,i=n?n.apply(this,e):e[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,e);return r.cache=o.set(i,a)||o,a};return r.cache=new(Pa.Cache||Xn),r}function Ma(t){if("function"!=typeof t)throw new It(e);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Pa.Cache=Xn;var Ra=wi((function(t,e){var n=(e=1==e.length&&Va(e[0])?Oe(e[0],Je(lo())):Oe(_r(e,1),Je(lo()))).length;return Yr((function(r){for(var i=-1,o=bn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Te(t,this,r)}))})),za=Yr((function(e,n){var r=cn(n,uo(za));return Ji(e,o,t,n,r)})),ja=Yr((function(e,n){var r=cn(n,uo(ja));return Ji(e,a,t,n,r)})),Ha=ro((function(e,n){return Ji(e,u,t,t,t,n)}));function Ua(t,e){return t===e||t!=t&&e!=e}var Ba=qi(Cr),Wa=qi((function(t,e){return t>=e})),Fa=Lr(function(){return arguments}())?Lr:function(t){return ns(t)&&Mt.call(t,"callee")&&!Kt.call(t,"callee")},Va=Et.isArray,Za=be?Je(be):function(t){return ns(t)&&Tr(t)==I};function qa(t){return null!=t&&ts(t.length)&&!Ja(t)}function Xa(t){return ns(t)&&qa(t)}var Ka=ye||mu,Ga=we?Je(we):function(t){return ns(t)&&Tr(t)==m};function Ya(t){if(!ns(t))return!1;var e=Tr(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Ja(t){if(!es(t))return!1;var e=Tr(t);return e==y||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=Ee?Je(Ee):function(t){return ns(t)&&vo(t)==w};function is(t){return"number"==typeof t||ns(t)&&Tr(t)==E}function os(t){if(!ns(t)||Tr(t)!=x)return!1;var e=qt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Pt.call(n)==Ht}var as=xe?Je(xe):function(t){return ns(t)&&Tr(t)==$},ss=Ae?Je(Ae):function(t){return ns(t)&&vo(t)==T};function us(t){return"string"==typeof t||!Va(t)&&ns(t)&&Tr(t)==C}function ls(t){return"symbol"==typeof t||ns(t)&&Tr(t)==k}var cs=$e?Je($e):function(t){return ns(t)&&ts(t.length)&&!!ie[Tr(t)]},fs=qi(jr),ds=qi((function(t,e){return t<=e}));function hs(t){if(!t)return[];if(qa(t))return us(t)?pn(t):Ii(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=vo(t);return(e==w?un:e==T?fn:Us)(t)}function ps(t){return t?(t=ms(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function vs(t){return t?ur(gs(t),0,d):0}function ms(t){if("number"==typeof t)return t;if(ls(t))return f;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ye(t);var n=ht.test(t);return n||gt.test(t)?ue(t.slice(2),n?2:8):dt.test(t)?f:+t}function _s(t){return Di(t,Ns(t))}function ys(t){return null==t?"":ci(t)}var bs=Ni((function(t,e){if($o(e)||qa(e))Di(e,Ls(e),t);else for(var n in e)Mt.call(e,n)&&nr(t,n,e[n])})),ws=Ni((function(t,e){Di(e,Ns(e),t)})),Es=Ni((function(t,e,n,r){Di(e,Ns(e),t,r)})),xs=Ni((function(t,e,n,r){Di(e,Ls(e),t,r)})),As=ro(sr),$s=Yr((function(e,n){e=Ct(e);var r=-1,i=n.length,o=i>2?n[2]:t;for(o&&wo(n[0],n[1],o)&&(i=1);++r<i;)for(var a=n[r],s=Ns(a),u=-1,l=s.length;++u<l;){var c=s[u],f=e[c];(f===t||Ua(f,Nt[c])&&!Mt.call(e,c))&&(e[c]=a[c])}return e})),Ts=Yr((function(e){return e.push(t,to),Te(Ps,t,e)}));function Cs(e,n,r){var i=null==e?t:Ar(e,n);return i===t?r:i}function ks(t,e){return null!=t&&mo(t,e,Sr)}var Ss=Bi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),t[e]=n}),eu(iu)),Is=Bi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),Ds=Yr(Dr);function Ls(t){return qa(t)?Yn(t):Rr(t)}function Ns(t){return qa(t)?Yn(t,!0):zr(t)}var Os=Ni((function(t,e,n){Wr(t,e,n)})),Ps=Ni((function(t,e,n,r){Wr(t,e,n,r)})),Ms=ro((function(t,e){var n={};if(null==t)return n;var r=!1;e=Oe(e,(function(e){return e=bi(e,t),r||(r=e.length>1),e})),Di(t,oo(t),n),r&&(n=lr(n,7,eo));for(var i=e.length;i--;)di(n,e[i]);return n})),Rs=ro((function(t,e){return null==t?{}:function(t,e){return Zr(t,e,(function(e,n){return ks(t,n)}))}(t,e)}));function zs(t,e){if(null==t)return{};var n=Oe(oo(t),(function(t){return[t]}));return e=lo(e),Zr(t,n,(function(t,n){return e(t,n[0])}))}var js=Yi(Ls),Hs=Yi(Ns);function Us(t){return null==t?[]:Qe(t,Ls(t))}var Bs=Ri((function(t,e,n){return e=e.toLowerCase(),t+(n?Ws(e):e)}));function Ws(t){return Ys(ys(t).toLowerCase())}function Fs(t){return(t=ys(t))&&t.replace(mt,rn).replace(Yt,"")}var Vs=Ri((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Zs=Ri((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),qs=Mi("toLowerCase"),Xs=Ri((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ks=Ri((function(t,e,n){return t+(n?" ":"")+Ys(e)})),Gs=Ri((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ys=Mi("toUpperCase");function Js(e,n,r){return e=ys(e),(n=r?t:n)===t?function(t){return ee.test(t)}(e)?function(t){return t.match(Qt)||[]}(e):function(t){return t.match(st)||[]}(e):e.match(n)||[]}var Qs=Yr((function(e,n){try{return Te(e,t,n)}catch(t){return Ya(t)?t:new At(t)}})),tu=ro((function(t,e){return ke(e,(function(e){e=zo(e),ar(t,e,Ia(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Hi(),ru=Hi(!0);function iu(t){return t}function ou(t){return Mr("function"==typeof t?t:lr(t,1))}var au=Yr((function(t,e){return function(n){return Dr(n,t,e)}})),su=Yr((function(t,e){return function(n){return Dr(t,n,e)}}));function uu(t,e,n){var r=Ls(e),i=xr(e,r);null!=n||es(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Ls(e)));var o=!(es(n)&&"chain"in n&&!n.chain),a=Ja(t);return ke(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Pe([this.value()],arguments))})})),t}function lu(){}var cu=Fi(Oe),fu=Fi(Ie),du=Fi(ze);function hu(t){return Eo(t)?Ze(zo(t)):function(t){return function(e){return Ar(e,t)}}(t)}var pu=Zi(),gu=Zi(!0);function vu(){return[]}function mu(){return!1}var _u,yu=Wi((function(t,e){return t+e}),0),bu=Ki("ceil"),wu=Wi((function(t,e){return t/e}),1),Eu=Ki("floor"),xu=Wi((function(t,e){return t*e}),1),Au=Ki("round"),$u=Wi((function(t,e){return t-e}),0);return Un.after=function(t,n){if("function"!=typeof n)throw new It(e);return t=gs(t),function(){if(--t<1)return n.apply(this,arguments)}},Un.ary=ka,Un.assign=bs,Un.assignIn=ws,Un.assignInWith=Es,Un.assignWith=xs,Un.at=As,Un.before=Sa,Un.bind=Ia,Un.bindAll=tu,Un.bindKey=Da,Un.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Va(t)?t:[t]},Un.chain=ha,Un.chunk=function(e,n,r){n=(r?wo(e,n,r):n===t)?1:yn(gs(n),0);var i=null==e?0:e.length;if(!i||n<1)return[];for(var o=0,a=0,s=Et(ge(i/n));o<i;)s[a++]=ii(e,o,o+=n);return s},Un.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Un.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Et(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Pe(Va(n)?Ii(n):[n],_r(e,1))},Un.cond=function(t){var n=null==t?0:t.length,r=lo();return t=n?Oe(t,(function(t){if("function"!=typeof t[1])throw new It(e);return[r(t[0]),t[1]]})):[],Yr((function(e){for(var r=-1;++r<n;){var i=t[r];if(Te(i[0],this,e))return Te(i[1],this,e)}}))},Un.conforms=function(t){return function(t){var e=Ls(t);return function(n){return cr(n,t,e)}}(lr(t,1))},Un.constant=eu,Un.countBy=va,Un.create=function(t,e){var n=Bn(t);return null==e?n:or(n,e)},Un.curry=function e(n,r,i){var o=Ji(n,8,t,t,t,t,t,r=i?t:r);return o.placeholder=e.placeholder,o},Un.curryRight=function e(n,r,o){var a=Ji(n,i,t,t,t,t,t,r=o?t:r);return a.placeholder=e.placeholder,a},Un.debounce=La,Un.defaults=$s,Un.defaultsDeep=Ts,Un.defer=Na,Un.delay=Oa,Un.difference=Uo,Un.differenceBy=Bo,Un.differenceWith=Wo,Un.drop=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,(n=r||n===t?1:gs(n))<0?0:n,i):[]},Un.dropRight=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,0,(n=i-(n=r||n===t?1:gs(n)))<0?0:n):[]},Un.dropRightWhile=function(t,e){return t&&t.length?pi(t,lo(e,3),!0,!0):[]},Un.dropWhile=function(t,e){return t&&t.length?pi(t,lo(e,3),!0):[]},Un.fill=function(e,n,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&wo(e,n,r)&&(r=0,i=o),function(e,n,r,i){var o=e.length;for((r=gs(r))<0&&(r=-r>o?0:o+r),(i=i===t||i>o?o:gs(i))<0&&(i+=o),i=r>i?0:vs(i);r<i;)e[r++]=n;return e}(e,n,r,i)):[]},Un.filter=function(t,e){return(Va(t)?De:mr)(t,lo(e,3))},Un.flatMap=function(t,e){return _r(Aa(t,e),1)},Un.flatMapDeep=function(t,e){return _r(Aa(t,e),l)},Un.flatMapDepth=function(e,n,r){return r=r===t?1:gs(r),_r(Aa(e,n),r)},Un.flatten=Zo,Un.flattenDeep=function(t){return null!=t&&t.length?_r(t,l):[]},Un.flattenDepth=function(e,n){return null!=e&&e.length?_r(e,n=n===t?1:gs(n)):[]},Un.flip=function(t){return Ji(t,512)},Un.flow=nu,Un.flowRight=ru,Un.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Un.functions=function(t){return null==t?[]:xr(t,Ls(t))},Un.functionsIn=function(t){return null==t?[]:xr(t,Ns(t))},Un.groupBy=wa,Un.initial=function(t){return null!=t&&t.length?ii(t,0,-1):[]},Un.intersection=Xo,Un.intersectionBy=Ko,Un.intersectionWith=Go,Un.invert=Ss,Un.invertBy=Is,Un.invokeMap=Ea,Un.iteratee=ou,Un.keyBy=xa,Un.keys=Ls,Un.keysIn=Ns,Un.map=Aa,Un.mapKeys=function(t,e){var n={};return e=lo(e,3),wr(t,(function(t,r,i){ar(n,e(t,r,i),t)})),n},Un.mapValues=function(t,e){var n={};return e=lo(e,3),wr(t,(function(t,r,i){ar(n,r,e(t,r,i))})),n},Un.matches=function(t){return Ur(lr(t,1))},Un.matchesProperty=function(t,e){return Br(t,lr(e,1))},Un.memoize=Pa,Un.merge=Os,Un.mergeWith=Ps,Un.method=au,Un.methodOf=su,Un.mixin=uu,Un.negate=Ma,Un.nthArg=function(t){return t=gs(t),Yr((function(e){return Fr(e,t)}))},Un.omit=Ms,Un.omitBy=function(t,e){return zs(t,Ma(lo(e)))},Un.once=function(t){return Sa(2,t)},Un.orderBy=function(e,n,r,i){return null==e?[]:(Va(n)||(n=null==n?[]:[n]),Va(r=i?t:r)||(r=null==r?[]:[r]),Vr(e,n,r))},Un.over=cu,Un.overArgs=Ra,Un.overEvery=fu,Un.overSome=du,Un.partial=za,Un.partialRight=ja,Un.partition=$a,Un.pick=Rs,Un.pickBy=zs,Un.property=hu,Un.propertyOf=function(e){return function(n){return null==e?t:Ar(e,n)}},Un.pull=Jo,Un.pullAll=Qo,Un.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qr(t,e,lo(n,2)):t},Un.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?qr(e,n,t,r):e},Un.pullAt=ta,Un.range=pu,Un.rangeRight=gu,Un.rearg=Ha,Un.reject=function(t,e){return(Va(t)?De:mr)(t,Ma(lo(e,3)))},Un.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Xr(t,i),n},Un.rest=function(n,r){if("function"!=typeof n)throw new It(e);return Yr(n,r=r===t?r:gs(r))},Un.reverse=ea,Un.sampleSize=function(e,n,r){return n=(r?wo(e,n,r):n===t)?1:gs(n),(Va(e)?Qn:Qr)(e,n)},Un.set=function(t,e,n){return null==t?t:ti(t,e,n)},Un.setWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:ti(e,n,r,i)},Un.shuffle=function(t){return(Va(t)?tr:ri)(t)},Un.slice=function(e,n,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&wo(e,n,r)?(n=0,r=i):(n=null==n?0:gs(n),r=r===t?i:gs(r)),ii(e,n,r)):[]},Un.sortBy=Ta,Un.sortedUniq=function(t){return t&&t.length?ui(t):[]},Un.sortedUniqBy=function(t,e){return t&&t.length?ui(t,lo(e,2)):[]},Un.split=function(e,n,r){return r&&"number"!=typeof r&&wo(e,n,r)&&(n=r=t),(r=r===t?d:r>>>0)?(e=ys(e))&&("string"==typeof n||null!=n&&!as(n))&&!(n=ci(n))&&sn(e)?Ei(pn(e),0,r):e.split(n,r):[]},Un.spread=function(t,n){if("function"!=typeof t)throw new It(e);return n=null==n?0:yn(gs(n),0),Yr((function(e){var r=e[n],i=Ei(e,0,n);return r&&Pe(i,r),Te(t,this,i)}))},Un.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},Un.take=function(e,n,r){return e&&e.length?ii(e,0,(n=r||n===t?1:gs(n))<0?0:n):[]},Un.takeRight=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,(n=i-(n=r||n===t?1:gs(n)))<0?0:n,i):[]},Un.takeRightWhile=function(t,e){return t&&t.length?pi(t,lo(e,3),!1,!0):[]},Un.takeWhile=function(t,e){return t&&t.length?pi(t,lo(e,3)):[]},Un.tap=function(t,e){return e(t),t},Un.throttle=function(t,n,r){var i=!0,o=!0;if("function"!=typeof t)throw new It(e);return es(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),La(t,n,{leading:i,maxWait:n,trailing:o})},Un.thru=pa,Un.toArray=hs,Un.toPairs=js,Un.toPairsIn=Hs,Un.toPath=function(t){return Va(t)?Oe(t,zo):ls(t)?[t]:Ii(Ro(ys(t)))},Un.toPlainObject=_s,Un.transform=function(t,e,n){var r=Va(t),i=r||Ka(t)||cs(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:es(t)&&Ja(o)?Bn(qt(t)):{}}return(i?ke:wr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Un.unary=function(t){return ka(t,1)},Un.union=na,Un.unionBy=ra,Un.unionWith=ia,Un.uniq=function(t){return t&&t.length?fi(t):[]},Un.uniqBy=function(t,e){return t&&t.length?fi(t,lo(e,2)):[]},Un.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?fi(e,t,n):[]},Un.unset=function(t,e){return null==t||di(t,e)},Un.unzip=oa,Un.unzipWith=aa,Un.update=function(t,e,n){return null==t?t:hi(t,e,yi(n))},Un.updateWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:hi(e,n,yi(r),i)},Un.values=Us,Un.valuesIn=function(t){return null==t?[]:Qe(t,Ns(t))},Un.without=sa,Un.words=Js,Un.wrap=function(t,e){return za(yi(e),t)},Un.xor=ua,Un.xorBy=la,Un.xorWith=ca,Un.zip=fa,Un.zipObject=function(t,e){return mi(t||[],e||[],nr)},Un.zipObjectDeep=function(t,e){return mi(t||[],e||[],ti)},Un.zipWith=da,Un.entries=js,Un.entriesIn=Hs,Un.extend=ws,Un.extendWith=Es,uu(Un,Un),Un.add=yu,Un.attempt=Qs,Un.camelCase=Bs,Un.capitalize=Ws,Un.ceil=bu,Un.clamp=function(e,n,r){return r===t&&(r=n,n=t),r!==t&&(r=(r=ms(r))==r?r:0),n!==t&&(n=(n=ms(n))==n?n:0),ur(ms(e),n,r)},Un.clone=function(t){return lr(t,4)},Un.cloneDeep=function(t){return lr(t,5)},Un.cloneDeepWith=function(e,n){return lr(e,5,n="function"==typeof n?n:t)},Un.cloneWith=function(e,n){return lr(e,4,n="function"==typeof n?n:t)},Un.conformsTo=function(t,e){return null==e||cr(t,e,Ls(e))},Un.deburr=Fs,Un.defaultTo=function(t,e){return null==t||t!=t?e:t},Un.divide=wu,Un.endsWith=function(e,n,r){e=ys(e),n=ci(n);var i=e.length,o=r=r===t?i:ur(gs(r),0,i);return(r-=n.length)>=0&&e.slice(r,o)==n},Un.eq=Ua,Un.escape=function(t){return(t=ys(t))&&q.test(t)?t.replace(V,on):t},Un.escapeRegExp=function(t){return(t=ys(t))&&et.test(t)?t.replace(tt,"\\$&"):t},Un.every=function(e,n,r){var i=Va(e)?Ie:gr;return r&&wo(e,n,r)&&(n=t),i(e,lo(n,3))},Un.find=ma,Un.findIndex=Fo,Un.findKey=function(t,e){return He(t,lo(e,3),wr)},Un.findLast=_a,Un.findLastIndex=Vo,Un.findLastKey=function(t,e){return He(t,lo(e,3),Er)},Un.floor=Eu,Un.forEach=ya,Un.forEachRight=ba,Un.forIn=function(t,e){return null==t?t:yr(t,lo(e,3),Ns)},Un.forInRight=function(t,e){return null==t?t:br(t,lo(e,3),Ns)},Un.forOwn=function(t,e){return t&&wr(t,lo(e,3))},Un.forOwnRight=function(t,e){return t&&Er(t,lo(e,3))},Un.get=Cs,Un.gt=Ba,Un.gte=Wa,Un.has=function(t,e){return null!=t&&mo(t,e,kr)},Un.hasIn=ks,Un.head=qo,Un.identity=iu,Un.includes=function(t,e,n,r){t=qa(t)?t:Us(t),n=n&&!r?gs(n):0;var i=t.length;return n<0&&(n=yn(i+n,0)),us(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Be(t,e,n)>-1},Un.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=yn(r+i,0)),Be(t,e,i)},Un.inRange=function(e,n,r){return n=ps(n),r===t?(r=n,n=0):r=ps(r),function(t,e,n){return t>=bn(e,n)&&t<yn(e,n)}(e=ms(e),n,r)},Un.invoke=Ds,Un.isArguments=Fa,Un.isArray=Va,Un.isArrayBuffer=Za,Un.isArrayLike=qa,Un.isArrayLikeObject=Xa,Un.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Tr(t)==v},Un.isBuffer=Ka,Un.isDate=Ga,Un.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},Un.isEmpty=function(t){if(null==t)return!0;if(qa(t)&&(Va(t)||"string"==typeof t||"function"==typeof t.splice||Ka(t)||cs(t)||Fa(t)))return!t.length;var e=vo(t);if(e==w||e==T)return!t.size;if($o(t))return!Rr(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},Un.isEqual=function(t,e){return Nr(t,e)},Un.isEqualWith=function(e,n,r){var i=(r="function"==typeof r?r:t)?r(e,n):t;return i===t?Nr(e,n,t,r):!!i},Un.isError=Ya,Un.isFinite=function(t){return"number"==typeof t&&je(t)},Un.isFunction=Ja,Un.isInteger=Qa,Un.isLength=ts,Un.isMap=rs,Un.isMatch=function(t,e){return t===e||Or(t,e,fo(e))},Un.isMatchWith=function(e,n,r){return r="function"==typeof r?r:t,Or(e,n,fo(n),r)},Un.isNaN=function(t){return is(t)&&t!=+t},Un.isNative=function(t){if(Ao(t))throw new At("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(t)},Un.isNil=function(t){return null==t},Un.isNull=function(t){return null===t},Un.isNumber=is,Un.isObject=es,Un.isObjectLike=ns,Un.isPlainObject=os,Un.isRegExp=as,Un.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=c},Un.isSet=ss,Un.isString=us,Un.isSymbol=ls,Un.isTypedArray=cs,Un.isUndefined=function(e){return e===t},Un.isWeakMap=function(t){return ns(t)&&vo(t)==S},Un.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Tr(t)},Un.join=function(t,e){return null==t?"":qe.call(t,e)},Un.kebabCase=Vs,Un.last=Yo,Un.lastIndexOf=function(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==t&&(o=(o=gs(r))<0?yn(i+o,0):bn(o,i-1)),n==n?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(e,n,o):Ue(e,Fe,o,!0)},Un.lowerCase=Zs,Un.lowerFirst=qs,Un.lt=fs,Un.lte=ds,Un.max=function(e){return e&&e.length?vr(e,iu,Cr):t},Un.maxBy=function(e,n){return e&&e.length?vr(e,lo(n,2),Cr):t},Un.mean=function(t){return Ve(t,iu)},Un.meanBy=function(t,e){return Ve(t,lo(e,2))},Un.min=function(e){return e&&e.length?vr(e,iu,jr):t},Un.minBy=function(e,n){return e&&e.length?vr(e,lo(n,2),jr):t},Un.stubArray=vu,Un.stubFalse=mu,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=xu,Un.nth=function(e,n){return e&&e.length?Fr(e,gs(n)):t},Un.noConflict=function(){return pe._===this&&(pe._=Ut),this},Un.noop=lu,Un.now=Ca,Un.pad=function(t,e,n){t=ys(t);var r=(e=gs(e))?hn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Vi(ve(i),n)+t+Vi(ge(i),n)},Un.padEnd=function(t,e,n){t=ys(t);var r=(e=gs(e))?hn(t):0;return e&&r<e?t+Vi(e-r,n):t},Un.padStart=function(t,e,n){t=ys(t);var r=(e=gs(e))?hn(t):0;return e&&r<e?Vi(e-r,n)+t:t},Un.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),En(ys(t).replace(nt,""),e||0)},Un.random=function(e,n,r){if(r&&"boolean"!=typeof r&&wo(e,n,r)&&(n=r=t),r===t&&("boolean"==typeof n?(r=n,n=t):"boolean"==typeof e&&(r=e,e=t)),e===t&&n===t?(e=0,n=1):(e=ps(e),n===t?(n=e,e=0):n=ps(n)),e>n){var i=e;e=n,n=i}if(r||e%1||n%1){var o=xn();return bn(e+o*(n-e+se("1e-"+((o+"").length-1))),n)}return Kr(e,n)},Un.reduce=function(t,e,n){var r=Va(t)?Me:Xe,i=arguments.length<3;return r(t,lo(e,4),n,i,hr)},Un.reduceRight=function(t,e,n){var r=Va(t)?Re:Xe,i=arguments.length<3;return r(t,lo(e,4),n,i,pr)},Un.repeat=function(e,n,r){return n=(r?wo(e,n,r):n===t)?1:gs(n),Gr(ys(e),n)},Un.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Un.result=function(e,n,r){var i=-1,o=(n=bi(n,e)).length;for(o||(o=1,e=t);++i<o;){var a=null==e?t:e[zo(n[i])];a===t&&(i=o,a=r),e=Ja(a)?a.call(e):a}return e},Un.round=Au,Un.runInContext=rt,Un.sample=function(t){return(Va(t)?Jn:Jr)(t)},Un.size=function(t){if(null==t)return 0;if(qa(t))return us(t)?hn(t):t.length;var e=vo(t);return e==w||e==T?t.size:Rr(t).length},Un.snakeCase=Xs,Un.some=function(e,n,r){var i=Va(e)?ze:oi;return r&&wo(e,n,r)&&(n=t),i(e,lo(n,3))},Un.sortedIndex=function(t,e){return ai(t,e)},Un.sortedIndexBy=function(t,e,n){return si(t,e,lo(n,2))},Un.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ai(t,e);if(r<n&&Ua(t[r],e))return r}return-1},Un.sortedLastIndex=function(t,e){return ai(t,e,!0)},Un.sortedLastIndexBy=function(t,e,n){return si(t,e,lo(n,2),!0)},Un.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ai(t,e,!0)-1;if(Ua(t[n],e))return n}return-1},Un.startCase=Ks,Un.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:ur(gs(n),0,t.length),e=ci(e),t.slice(n,n+e.length)==e},Un.subtract=$u,Un.sum=function(t){return t&&t.length?Ke(t,iu):0},Un.sumBy=function(t,e){return t&&t.length?Ke(t,lo(e,2)):0},Un.template=function(e,n,r){var i=Un.templateSettings;r&&wo(e,n,r)&&(n=t),e=ys(e),n=Es({},n,i,Qi);var o,a,s=Es({},n.imports,i.imports,Qi),u=Ls(s),l=Qe(s,u),c=0,f=n.interpolate||_t,d="__p += '",h=kt((n.escape||_t).source+"|"+f.source+"|"+(f===G?ct:_t).source+"|"+(n.evaluate||_t).source+"|$","g"),p="//# sourceURL="+(Mt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";e.replace(h,(function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(c,u).replace(yt,an),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),d+="';\n";var g=Mt.call(n,"variable")&&n.variable;if(g){if(ut.test(g))throw new At("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(U,""):d).replace(B,"$1").replace(W,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Qs((function(){return $t(u,p+"return "+d).apply(t,l)}));if(v.source=d,Ya(v))throw v;return v},Un.times=function(t,e){if((t=gs(t))<1||t>c)return[];var n=d,r=bn(t,d);e=lo(e),t-=d;for(var i=Ge(r,e);++n<t;)e(n);return i},Un.toFinite=ps,Un.toInteger=gs,Un.toLength=vs,Un.toLower=function(t){return ys(t).toLowerCase()},Un.toNumber=ms,Un.toSafeInteger=function(t){return t?ur(gs(t),-9007199254740991,c):0===t?t:0},Un.toString=ys,Un.toUpper=function(t){return ys(t).toUpperCase()},Un.trim=function(e,n,r){if((e=ys(e))&&(r||n===t))return Ye(e);if(!e||!(n=ci(n)))return e;var i=pn(e),o=pn(n);return Ei(i,en(i,o),nn(i,o)+1).join("")},Un.trimEnd=function(e,n,r){if((e=ys(e))&&(r||n===t))return e.slice(0,gn(e)+1);if(!e||!(n=ci(n)))return e;var i=pn(e);return Ei(i,0,nn(i,pn(n))+1).join("")},Un.trimStart=function(e,n,r){if((e=ys(e))&&(r||n===t))return e.replace(nt,"");if(!e||!(n=ci(n)))return e;var i=pn(e);return Ei(i,en(i,pn(n))).join("")},Un.truncate=function(e,n){var r=30,i="...";if(es(n)){var o="separator"in n?n.separator:o;r="length"in n?gs(n.length):r,i="omission"in n?ci(n.omission):i}var a=(e=ys(e)).length;if(sn(e)){var s=pn(e);a=s.length}if(r>=a)return e;var u=r-hn(i);if(u<1)return i;var l=s?Ei(s,0,u).join(""):e.slice(0,u);if(o===t)return l+i;if(s&&(u+=l.length-u),as(o)){if(e.slice(u).search(o)){var c,f=l;for(o.global||(o=kt(o.source,ys(ft.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var d=c.index;l=l.slice(0,d===t?u:d)}}else if(e.indexOf(ci(o),u)!=u){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+i},Un.unescape=function(t){return(t=ys(t))&&Z.test(t)?t.replace(F,vn):t},Un.uniqueId=function(t){var e=++Rt;return ys(t)+e},Un.upperCase=Gs,Un.upperFirst=Ys,Un.each=ya,Un.eachRight=ba,Un.first=qo,uu(Un,(_u={},wr(Un,(function(t,e){Mt.call(Un.prototype,e)||(_u[e]=t)})),_u),{chain:!1}),Un.VERSION="4.17.21",ke(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Un[t].placeholder=Un})),ke(["drop","take"],(function(e,n){Vn.prototype[e]=function(r){r=r===t?1:yn(gs(r),0);var i=this.__filtered__&&!n?new Vn(this):this.clone();return i.__filtered__?i.__takeCount__=bn(r,i.__takeCount__):i.__views__.push({size:bn(r,d),type:e+(i.__dir__<0?"Right":"")}),i},Vn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ke(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ke(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}})),ke(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(iu)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Yr((function(t,e){return"function"==typeof t?new Vn(this):this.map((function(n){return Dr(n,t,e)}))})),Vn.prototype.reject=function(t){return this.filter(Ma(lo(t)))},Vn.prototype.slice=function(e,n){e=gs(e);var r=this;return r.__filtered__&&(e>0||n<0)?new Vn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==t&&(r=(n=gs(n))<0?r.dropRight(-n):r.take(n-e)),r)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(d)},wr(Vn.prototype,(function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),o=Un[i?"take"+("last"==n?"Right":""):n],a=i||/^find/.test(n);o&&(Un.prototype[n]=function(){var n=this.__wrapped__,s=i?[1]:arguments,u=n instanceof Vn,l=s[0],c=u||Va(n),f=function(t){var e=o.apply(Un,Pe([t],s));return i&&d?e[0]:e};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=a&&!d,g=u&&!h;if(!a&&c){n=g?n:new Vn(this);var v=e.apply(n,s);return v.__actions__.push({func:pa,args:[f],thisArg:t}),new Fn(v,d)}return p&&g?e.apply(this,s):(v=this.thru(f),p?i?v.value()[0]:v.value():v)})})),ke(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Dt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Un.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Va(i)?i:[],t)}return this[n]((function(n){return e.apply(Va(n)?n:[],t)}))}})),wr(Vn.prototype,(function(t,e){var n=Un[e];if(n){var r=n.name+"";Mt.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:e,func:n})}})),Ln[Ui(t,2).name]=[{name:"wrapper",func:t}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=Ii(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ii(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ii(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Va(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=bn(e,t+a);break;case"takeRight":t=yn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,h=bn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return gi(t,this.__actions__);var p=[];t:for(;u--&&d<h;){for(var g=-1,v=t[l+=e];++g<f;){var m=c[g],_=m.iteratee,y=m.type,b=_(v);if(2==y)v=b;else if(!b){if(1==y)continue t;break t}}p[d++]=v}return p},Un.prototype.at=ga,Un.prototype.chain=function(){return ha(this)},Un.prototype.commit=function(){return new Fn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===t&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var n,r=this;r instanceof Wn;){var i=Ho(r);i.__index__=0,i.__values__=t,n?o.__wrapped__=i:n=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,n},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vn){var n=e;return this.__actions__.length&&(n=new Vn(this)),(n=n.reverse()).__actions__.push({func:pa,args:[ea],thisArg:t}),new Fn(n,this.__chain__)}return this.thru(ea)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,ae&&(Un.prototype[ae]=function(){return this}),Un}();ve?((ve.exports=mn)._=mn,ge._=mn):pe._=mn}.call(de);var pe=he.exports;class ge{constructor(t,e){this._layoutCells=this._parseCardLayout(t,e),this._cardOrientation=e}getCells(){return this._layoutCells}getColumns(){const t=this._cardOrientation==ct.VERTICAL?Pt:Mt;return this._layoutCells.map((e=>t.get(e))).join(" ")}_parseCardLayout(t,e){const n=e==ct.VERTICAL?Pt:Mt;let r=[];return r=t&&null!=t?t instanceof Array?t:t.toLowerCase().split(" "):Array.from(n.keys()),r.filter((t=>n.has(t)))}}let ve=class extends le{createLayout(){return new ge(this.cardConfig.layout,ct.HORIZONTAL)}renderContent(){let t=new Map(Object.entries(pe.groupBy(this.departures||[],"entity"))),e=[];return 0==this.cardConfig.sortDepartures?this.cardConfig?.entities?.forEach((n=>{const r=t.get(n.entity);r&&e.push(this._renderRow(r))})):t.forEach((t=>{e.push(this._renderRow(t))})),W`<div class="table-content" id="content-background" theme="${this.theme}">${this.renderListHeader()}${e}</div>`}getQueryLineElements(){return".table-row"}getQueryTimeElements(){return".table-time"}_renderRow(t){if(!t)return W``;let e=this.layout?.getCells();if(!e)return W`Please define layout!`;let n=[],r={"grid-template-columns":this.layout?.getColumns(),borderLeft:"none"},i={arriving:t.some((t=>t.time.isArriving(this.cardConfig.arrivalTimeOffset)))};const o=t.map((t=>t.time)),a=t[0],s=this.getDepartureIcon()??a.icon??Rt;if(e.forEach((t=>{switch(t){case ft.ICON:n.push(this.renderTransportIcon(a));break;case ft.LINE:n.push(this.renderCellLineName(a));break;case ft.DESTINATION:n.push(this.renderCellDestination(a));break;case ft.TIME_DIFF:n.push(this._renderTimes(o,s))}})),this.theme===lt.CAPPUCINO)r={...r,borderLeft:`8px solid ${a.lineColor??""}`};return W` <div class="table-row ${qt(i)}" theme=${this.cardConfig.theme} style=${Gt(r)}>${n}</div> `}_renderTimes(t,e){let n=t.slice(0,this.cardConfig.departuresToShow);return W`<div class="table-times">${n.map((t=>this._renderTime(t,e)))}</div>`}_renderTime(t,e){let n=W``,r="";const i=e??Rt,o=t.isArriving(this.cardConfig.arrivalTimeOffset);let a={timestamp:t.timeDiff>60,arriving:o,delayed:t.isDelayed,earlier:t.isEarlier};return t.isDelayed?r=`+${t.delay}`:t.isEarlier&&(r=`${t.delay}`),n=0==t.timeDiff?W`<ha-icon icon=${i}></ha-icon>`:t.timeDiff>60?W`${ie(t.time,"HH:mm")}`:W`${t.timeDiff} min`,W`<div class="table-time ${qt(a)}">
      <div class="table-time-diff">${n}</div>
      ${o||!t.delay?V:W`<div class="table-time-delay">${r}</div>`}
    </div>`}};function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}ve.styles=[le.styles,s`
      .table-content {
        display: flex;
        flex-direction: column;
      }
      .table-row {
        display: grid;
        align-items: stretch;
        column-gap: 5px;
        padding: 10px 5px;
        margin: 5px 0px;
      }
      .table-times {
        display: flex;
        justify-content: flex-end;
        gap: 5px;
      }
      .table-time {
        display: flex;
        flex-wrap: nowrap;
        justify-content: flex-end;
        min-width: 50px;
        position: relative;
      }
      .table-time-diff {
        align-self: center;
      }
      .table-time-delay {
        position: absolute;
        top: -13px;
        right: 0px;
        text-align: right;
        font-size: 0.8em;
        border-radius: 3px;
        height: 16px;
        padding: 0px 3px;
        color: white;
      }
      .table-time.earlier > .table-time-delay {
        background-color: var(--departures-delay-ok);
      }
      .table-time.delayed > .table-time-delay {
        background-color: var(--departures-delay-bad);
      }
      @media (min-width: 100px) and (max-width: 500px) {
        .list-header {
          display: none;
        }
        .table-row {
          display: flex;
          gap: 10px;
          flex-direction: row;
          flex-wrap: wrap;
          height: auto;
          margin-bottom: 10px;
        }
        .cell-transport-icon {
          display: none;
        }
        .cell-line {
          font-weight: bold;
          background-color: none;
        }
        .cell-destination {
          display: flex;
          overflow: visible;
        }
        .table-times {
          display: flex;
          width: 100%;
          justify-content: flex-start;
          flex-direction: row;
          flex-wrap: wrap;
          align-content: center;
          align-items: center;
          background-color: rgba(218 215 205 / 20%);
        }
      }
    `],ve=t([jt("card-content-table")],ve);var _e="(prefers-reduced-motion: reduce)",ye={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7};function be(t){t.length=0}function we(t,e,n){return Array.prototype.slice.call(t,e,n)}function Ee(t){return t.bind.apply(t,[null].concat(we(arguments,1)))}var xe=setTimeout,Ae=function(){};function $e(t){return requestAnimationFrame(t)}function Te(t,e){return typeof e===t}function Ce(t){return!Le(t)&&Te("object",t)}var ke=Array.isArray,Se=Ee(Te,"function"),Ie=Ee(Te,"string"),De=Ee(Te,"undefined");function Le(t){return null===t}function Ne(t){try{return t instanceof(t.ownerDocument.defaultView||window).HTMLElement}catch(t){return!1}}function Oe(t){return ke(t)?t:[t]}function Pe(t,e){Oe(t).forEach(e)}function Me(t,e){return t.indexOf(e)>-1}function Re(t,e){return t.push.apply(t,Oe(e)),t}function ze(t,e,n){t&&Pe(e,(function(e){e&&t.classList[n?"add":"remove"](e)}))}function je(t,e){ze(t,Ie(e)?e.split(" "):e,!0)}function He(t,e){Pe(e,t.appendChild.bind(t))}function Ue(t,e){Pe(t,(function(t){var n=(e||t).parentNode;n&&n.insertBefore(t,e)}))}function Be(t,e){return Ne(t)&&(t.msMatchesSelector||t.matches).call(t,e)}function We(t,e){var n=t?we(t.children):[];return e?n.filter((function(t){return Be(t,e)})):n}function Fe(t,e){return e?We(t,e)[0]:t.firstElementChild}var Ve=Object.keys;function Ze(t,e,n){return t&&(n?Ve(t).reverse():Ve(t)).forEach((function(n){"__proto__"!==n&&e(t[n],n)})),t}function qe(t){return we(arguments,1).forEach((function(e){Ze(e,(function(n,r){t[r]=e[r]}))})),t}function Xe(t){return we(arguments,1).forEach((function(e){Ze(e,(function(e,n){ke(e)?t[n]=e.slice():Ce(e)?t[n]=Xe({},Ce(t[n])?t[n]:{},e):t[n]=e}))})),t}function Ke(t,e){Pe(e||Ve(t),(function(e){delete t[e]}))}function Ge(t,e){Pe(t,(function(t){Pe(e,(function(e){t&&t.removeAttribute(e)}))}))}function Ye(t,e,n){Ce(e)?Ze(e,(function(e,n){Ye(t,n,e)})):Pe(t,(function(t){Le(n)||""===n?Ge(t,e):t.setAttribute(e,String(n))}))}function Je(t,e,n){var r=document.createElement(t);return e&&(Ie(e)?je(r,e):Ye(r,e)),n&&He(n,r),r}function Qe(t,e,n){if(De(n))return getComputedStyle(t)[e];Le(n)||(t.style[e]=""+n)}function tn(t,e){Qe(t,"display",e)}function en(t){t.setActive&&t.setActive()||t.focus({preventScroll:!0})}function nn(t,e){return t.getAttribute(e)}function rn(t,e){return t&&t.classList.contains(e)}function on(t){return t.getBoundingClientRect()}function an(t){Pe(t,(function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}))}function sn(t){return Fe((new DOMParser).parseFromString(t,"text/html").body)}function un(t,e){t.preventDefault(),e&&(t.stopPropagation(),t.stopImmediatePropagation())}function ln(t,e){return t&&t.querySelector(e)}function cn(t,e){return e?we(t.querySelectorAll(e)):[]}function fn(t,e){ze(t,e,!1)}function dn(t){return t.timeStamp}function hn(t){return Ie(t)?t:t?t+"px":""}var pn="splide",gn="data-"+pn;function vn(t,e){if(!t)throw new Error("["+pn+"] "+(e||""))}var mn=Math.min,_n=Math.max,yn=Math.floor,bn=Math.ceil,wn=Math.abs;function En(t,e,n){return wn(t-e)<n}function xn(t,e,n,r){var i=mn(e,n),o=_n(e,n);return r?i<t&&t<o:i<=t&&t<=o}function An(t,e,n){var r=mn(e,n),i=_n(e,n);return mn(_n(r,t),i)}function $n(t){return+(t>0)-+(t<0)}function Tn(t,e){return Pe(e,(function(e){t=t.replace("%s",""+e)})),t}function Cn(t){return t<10?"0"+t:""+t}var kn={};function Sn(){var t=[];function e(t,e,n){Pe(t,(function(t){t&&Pe(e,(function(e){e.split(" ").forEach((function(e){var r=e.split(".");n(t,r[0],r[1])}))}))}))}return{bind:function(n,r,i,o){e(n,r,(function(e,n,r){var a="addEventListener"in e,s=a?e.removeEventListener.bind(e,n,i,o):e.removeListener.bind(e,i);a?e.addEventListener(n,i,o):e.addListener(i),t.push([e,n,r,i,s])}))},unbind:function(n,r,i){e(n,r,(function(e,n,r){t=t.filter((function(t){return!!(t[0]!==e||t[1]!==n||t[2]!==r||i&&t[3]!==i)||(t[4](),!1)}))}))},dispatch:function(t,e,n){var r,i=!0;return"function"==typeof CustomEvent?r=new CustomEvent(e,{bubbles:i,detail:n}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,i,!1,n),t.dispatchEvent(r),r},destroy:function(){t.forEach((function(t){t[4]()})),be(t)}}}var In="mounted",Dn="ready",Ln="move",Nn="moved",On="click",Pn="active",Mn="inactive",Rn="visible",zn="hidden",jn="refresh",Hn="updated",Un="resize",Bn="resized",Wn="scroll",Fn="scrolled",Vn="destroy",Zn="arrows:mounted",qn="navigation:mounted",Xn="autoplay:play",Kn="autoplay:pause",Gn="lazyload:loaded",Yn="sk",Jn="sh",Qn="ei";function tr(t){var e=t?t.event.bus:document.createDocumentFragment(),n=Sn();return t&&t.event.on(Vn,n.destroy),qe(n,{bus:e,on:function(t,r){n.bind(e,Oe(t).join(" "),(function(t){r.apply(r,ke(t.detail)?t.detail:[])}))},off:Ee(n.unbind,e),emit:function(t){n.dispatch(e,t,we(arguments,1))}})}function er(t,e,n,r){var i,o,a=Date.now,s=0,u=!0,l=0;function c(){if(!u){if(s=t?mn((a()-i)/t,1):1,n&&n(s),s>=1&&(e(),i=a(),r&&++l>=r))return f();o=$e(c)}}function f(){u=!0}function d(){o&&cancelAnimationFrame(o),s=0,o=0,u=!0}return{start:function(e){e||d(),i=a()-(e?s*t:0),u=!1,o=$e(c)},rewind:function(){i=a(),s=0,n&&n(s)},pause:f,cancel:d,set:function(e){t=e},isPaused:function(){return u}}}var nr="Arrow",rr=nr+"Left",ir=nr+"Right",or=nr+"Up",ar=nr+"Down",sr="ttb",ur={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[or,ir],ArrowRight:[ar,rr]};var lr="role",cr="tabindex",fr="aria-",dr=fr+"controls",hr=fr+"current",pr=fr+"selected",gr=fr+"label",vr=fr+"labelledby",mr=fr+"hidden",_r=fr+"orientation",yr=fr+"roledescription",br=fr+"live",wr=fr+"busy",Er=fr+"atomic",xr=[lr,cr,"disabled",dr,hr,gr,vr,mr,_r,yr],Ar=pn+"__",$r="is-",Tr=pn,Cr=Ar+"track",kr=Ar+"list",Sr=Ar+"slide",Ir=Sr+"--clone",Dr=Sr+"__container",Lr=Ar+"arrows",Nr=Ar+"arrow",Or=Nr+"--prev",Pr=Nr+"--next",Mr=Ar+"pagination",Rr=Mr+"__page",zr=Ar+"progress"+"__bar",jr=Ar+"toggle",Hr=Ar+"sr",Ur=$r+"initialized",Br=$r+"active",Wr=$r+"prev",Fr=$r+"next",Vr=$r+"visible",Zr=$r+"loading",qr=$r+"focus-in",Xr=$r+"overflow",Kr=[Br,Vr,Wr,Fr,Zr,qr,Xr],Gr={slide:Sr,clone:Ir,arrows:Lr,arrow:Nr,prev:Or,next:Pr,pagination:Mr,page:Rr,spinner:Ar+"spinner"};var Yr="touchstart mousedown",Jr="touchmove mousemove",Qr="touchend touchcancel mouseup click";var ti="slide",ei="loop",ni="fade";function ri(t,e,n,r){var i,o=tr(t),a=o.on,s=o.emit,u=o.bind,l=t.Components,c=t.root,f=t.options,d=f.isNavigation,h=f.updateOnMove,p=f.i18n,g=f.pagination,v=f.slideFocus,m=l.Direction.resolve,_=nn(r,"style"),y=nn(r,gr),b=n>-1,w=Fe(r,"."+Dr);function E(){var i=t.splides.map((function(t){var n=t.splide.Components.Slides.getAt(e);return n?n.slide.id:""})).join(" ");Ye(r,gr,Tn(p.slideX,(b?n:e)+1)),Ye(r,dr,i),Ye(r,lr,v?"button":""),v&&Ge(r,yr)}function x(){i||A()}function A(){if(!i){var n=t.index;(o=$())!==rn(r,Br)&&(ze(r,Br,o),Ye(r,hr,d&&o||""),s(o?Pn:Mn,T)),function(){var e=function(){if(t.is(ni))return $();var e=on(l.Elements.track),n=on(r),i=m("left",!0),o=m("right",!0);return yn(e[i])<=bn(n[i])&&yn(n[o])<=bn(e[o])}(),n=!e&&(!$()||b);t.state.is([4,5])||Ye(r,mr,n||"");Ye(cn(r,f.focusableNodes||""),cr,n?-1:""),v&&Ye(r,cr,n?-1:0);e!==rn(r,Vr)&&(ze(r,Vr,e),s(e?Rn:zn,T));if(!e&&document.activeElement===r){var i=l.Slides.getAt(t.index);i&&en(i.slide)}}(),ze(r,Wr,e===n-1),ze(r,Fr,e===n+1)}var o}function $(){var r=t.index;return r===e||f.cloneStatus&&r===n}var T={index:e,slideIndex:n,slide:r,container:w,isClone:b,mount:function(){b||(r.id=c.id+"-slide"+Cn(e+1),Ye(r,lr,g?"tabpanel":"group"),Ye(r,yr,p.slide),Ye(r,gr,y||Tn(p.slideLabel,[e+1,t.length]))),u(r,"click",Ee(s,On,T)),u(r,"keydown",Ee(s,Yn,T)),a([Nn,Jn,Fn],A),a(qn,E),h&&a(Ln,x)},destroy:function(){i=!0,o.destroy(),fn(r,Kr),Ge(r,xr),Ye(r,"style",_),Ye(r,gr,y||"")},update:A,style:function(t,e,n){Qe(n&&w||r,t,e)},isWithin:function(n,r){var i=wn(n-e);return b||!f.rewind&&!t.is(ei)||(i=mn(i,t.length-i)),i<=r}};return T}var ii=gn+"-interval";var oi={passive:!1,capture:!0};var ai={Spacebar:" ",Right:ir,Left:rr,Up:or,Down:ar};function si(t){return t=Ie(t)?t:t.key,ai[t]||t}var ui="keydown";var li=gn+"-lazy",ci=li+"-srcset",fi="["+li+"], ["+ci+"]";var di=[" ","Enter"];var hi=Object.freeze({__proto__:null,Media:function(t,e,n){var r=t.state,i=n.breakpoints||{},o=n.reducedMotion||{},a=Sn(),s=[];function u(t){t&&a.destroy()}function l(t,e){var n=matchMedia(e);a.bind(n,"change",c),s.push([t,n])}function c(){var e=r.is(7),i=n.direction,o=s.reduce((function(t,e){return Xe(t,e[1].matches?e[0]:{})}),{});Ke(n),f(o),n.destroy?t.destroy("completely"===n.destroy):e?(u(!0),t.mount()):i!==n.direction&&t.refresh()}function f(e,i,o){Xe(n,e),i&&Xe(Object.getPrototypeOf(n),e),!o&&r.is(1)||t.emit(Hn,n)}return{setup:function(){var t="min"===n.mediaQuery;Ve(i).sort((function(e,n){return t?+e-+n:+n-+e})).forEach((function(e){l(i[e],"("+(t?"min":"max")+"-width:"+e+"px)")})),l(o,_e),c()},destroy:u,reduce:function(t){matchMedia(_e).matches&&(t?Xe(n,o):Ke(n,Ve(o)))},set:f}},Direction:function(t,e,n){return{resolve:function(t,e,r){var i="rtl"!==(r=r||n.direction)||e?r===sr?0:-1:1;return ur[t]&&ur[t][i]||t.replace(/width|left|right/i,(function(t,e){var n=ur[t.toLowerCase()][i]||t;return e>0?n.charAt(0).toUpperCase()+n.slice(1):n}))},orient:function(t){return t*("rtl"===n.direction?1:-1)}}},Elements:function(t,e,n){var r,i,o,a=tr(t),s=a.on,u=a.bind,l=t.root,c=n.i18n,f={},d=[],h=[],p=[];function g(){r=_("."+Cr),i=Fe(r,"."+kr),vn(r&&i,"A track/list element is missing."),Re(d,We(i,"."+Sr+":not(."+Ir+")")),Ze({arrows:Lr,pagination:Mr,prev:Or,next:Pr,bar:zr,toggle:jr},(function(t,e){f[e]=_("."+t)})),qe(f,{root:l,track:r,list:i,slides:d}),function(){var t=l.id||(o=pn,""+o+Cn(kn[o]=(kn[o]||0)+1)),e=n.role;var o;l.id=t,r.id=r.id||t+"-track",i.id=i.id||t+"-list",!nn(l,lr)&&"SECTION"!==l.tagName&&e&&Ye(l,lr,e);Ye(l,yr,c.carousel),Ye(i,lr,"presentation")}(),m()}function v(t){var e=xr.concat("style");be(d),fn(l,h),fn(r,p),Ge([r,i],e),Ge(l,t?e:["style",yr])}function m(){fn(l,h),fn(r,p),h=y(Tr),p=y(Cr),je(l,h),je(r,p),Ye(l,gr,n.label),Ye(l,vr,n.labelledby)}function _(t){var e=ln(l,t);return e&&function(t,e){if(Se(t.closest))return t.closest(e);for(var n=t;n&&1===n.nodeType&&!Be(n,e);)n=n.parentElement;return n}(e,"."+Tr)===l?e:void 0}function y(t){return[t+"--"+n.type,t+"--"+n.direction,n.drag&&t+"--draggable",n.isNavigation&&t+"--nav",t===Tr&&Br]}return qe(f,{setup:g,mount:function(){s(jn,v),s(jn,g),s(Hn,m),u(document,Yr+" keydown",(function(t){o="keydown"===t.type}),{capture:!0}),u(l,"focusin",(function(){ze(l,qr,!!o)}))},destroy:v})},Slides:function(t,e,n){var r=tr(t),i=r.on,o=r.emit,a=r.bind,s=e.Elements,u=s.slides,l=s.list,c=[];function f(){u.forEach((function(t,e){h(t,e,-1)}))}function d(){g((function(t){t.destroy()})),be(c)}function h(e,n,r){var i=ri(t,n,r,e);i.mount(),c.push(i),c.sort((function(t,e){return t.index-e.index}))}function p(t){return t?v((function(t){return!t.isClone})):c}function g(t,e){p(e).forEach(t)}function v(t){return c.filter(Se(t)?t:function(e){return Ie(t)?Be(e.slide,t):Me(Oe(t),e.index)})}return{mount:function(){f(),i(jn,d),i(jn,f)},destroy:d,update:function(){g((function(t){t.update()}))},register:h,get:p,getIn:function(t){var r=e.Controller,i=r.toIndex(t),o=r.hasFocus()?1:n.perPage;return v((function(t){return xn(t.index,i,i+o-1)}))},getAt:function(t){return v(t)[0]},add:function(t,e){Pe(t,(function(t){if(Ie(t)&&(t=sn(t)),Ne(t)){var r=u[e];r?Ue(t,r):He(l,t),je(t,n.classes.slide),i=t,s=Ee(o,Un),c=cn(i,"img"),(f=c.length)?c.forEach((function(t){a(t,"load error",(function(){--f||s()}))})):s()}var i,s,c,f})),o(jn)},remove:function(t){an(v(t).map((function(t){return t.slide}))),o(jn)},forEach:g,filter:v,style:function(t,e,n){g((function(r){r.style(t,e,n)}))},getLength:function(t){return t?u.length:c.length},isEnough:function(){return c.length>n.perPage}}},Layout:function(t,e,n){var r,i,o,a=tr(t),s=a.on,u=a.bind,l=a.emit,c=e.Slides,f=e.Direction.resolve,d=e.Elements,h=d.root,p=d.track,g=d.list,v=c.getAt,m=c.style;function _(){r=n.direction===sr,Qe(h,"maxWidth",hn(n.width)),Qe(p,f("paddingLeft"),b(!1)),Qe(p,f("paddingRight"),b(!0)),y(!0)}function y(t){var e=on(h);(t||i.width!==e.width||i.height!==e.height)&&(Qe(p,"height",function(){var t="";r&&(vn(t=w(),"height or heightRatio is missing."),t="calc("+t+" - "+b(!1)+" - "+b(!0)+")");return t}()),m(f("marginRight"),hn(n.gap)),m("width",n.autoWidth?null:hn(n.fixedWidth)||(r?"":E())),m("height",hn(n.fixedHeight)||(r?n.autoHeight?null:E():w()),!0),i=e,l(Bn),o!==(o=k())&&(ze(h,Xr,o),l("overflow",o)))}function b(t){var e=n.padding,r=f(t?"right":"left");return e&&hn(e[r]||(Ce(e)?0:e))||"0px"}function w(){return hn(n.height||on(g).width*n.heightRatio)}function E(){var t=hn(n.gap);return"calc((100%"+(t&&" + "+t)+")/"+(n.perPage||1)+(t&&" - "+t)+")"}function x(){return on(g)[f("width")]}function A(t,e){var n=v(t||0);return n?on(n.slide)[f("width")]+(e?0:C()):0}function $(t,e){var n=v(t);if(n){var r=on(n.slide)[f("right")],i=on(g)[f("left")];return wn(r-i)+(e?0:C())}return 0}function T(e){return $(t.length-1)-$(0)+A(0,e)}function C(){var t=v(0);return t&&parseFloat(Qe(t.slide,f("marginRight")))||0}function k(){return t.is(ni)||T(!0)>x()}return{mount:function(){var t,e,n;_(),u(window,"resize load",(t=Ee(l,Un),n=er(e||0,t,null,1),function(){n.isPaused()&&n.start()})),s([Hn,jn],_),s(Un,y)},resize:y,listSize:x,slideSize:A,sliderSize:T,totalSize:$,getPadding:function(t){return parseFloat(Qe(p,f("padding"+(t?"Right":"Left"))))||0},isOverflow:k}},Clones:function(t,e,n){var r,i=tr(t),o=i.on,a=e.Elements,s=e.Slides,u=e.Direction.resolve,l=[];function c(){o(jn,f),o([Hn,Un],h),(r=p())&&(!function(e){var r=s.get().slice(),i=r.length;if(i){for(;r.length<e;)Re(r,r);Re(r.slice(-e),r.slice(0,e)).forEach((function(o,u){var c=u<e,f=function(e,r){var i=e.cloneNode(!0);return je(i,n.classes.clone),i.id=t.root.id+"-clone"+Cn(r+1),i}(o.slide,u);c?Ue(f,r[0].slide):He(a.list,f),Re(l,f),s.register(f,u-e+(c?0:i),o.index)}))}}(r),e.Layout.resize(!0))}function f(){d(),c()}function d(){an(l),be(l),i.destroy()}function h(){var t=p();r!==t&&(r<t||!t)&&i.emit(jn)}function p(){var r=n.clones;if(t.is(ei)){if(De(r)){var i=n[u("fixedWidth")]&&e.Layout.slideSize(0);r=i&&bn(on(a.track)[u("width")]/i)||n[u("autoWidth")]&&t.length||2*n.perPage}}else r=0;return r}return{mount:c,destroy:d}},Move:function(t,e,n){var r,i=tr(t),o=i.on,a=i.emit,s=t.state.set,u=e.Layout,l=u.slideSize,c=u.getPadding,f=u.totalSize,d=u.listSize,h=u.sliderSize,p=e.Direction,g=p.resolve,v=p.orient,m=e.Elements,_=m.list,y=m.track;function b(){e.Controller.isBusy()||(e.Scroll.cancel(),w(t.index),e.Slides.update())}function w(t){E(T(t,!0))}function E(n,r){if(!t.is(ni)){var i=r?n:function(n){if(t.is(ei)){var r=$(n),i=r>e.Controller.getEnd();(r<0||i)&&(n=x(n,i))}return n}(n);Qe(_,"transform","translate"+g("X")+"("+i+"px)"),n!==i&&a(Jn)}}function x(t,e){var n=t-k(e),r=h();return t-=v(r*(bn(wn(n)/r)||1))*(e?1:-1)}function A(){E(C(),!0),r.cancel()}function $(t){for(var n=e.Slides.get(),r=0,i=1/0,o=0;o<n.length;o++){var a=n[o].index,s=wn(T(a,!0)-t);if(!(s<=i))break;i=s,r=a}return r}function T(e,r){var i=v(f(e-1)-function(t){var e=n.focus;return"center"===e?(d()-l(t,!0))/2:+e*l(t)||0}(e));return r?function(e){n.trimSpace&&t.is(ti)&&(e=An(e,0,v(h(!0)-d())));return e}(i):i}function C(){var t=g("left");return on(_)[t]-on(y)[t]+v(c(!1))}function k(t){return T(t?e.Controller.getEnd():0,!!n.trimSpace)}return{mount:function(){r=e.Transition,o([In,Bn,Hn,jn],b)},move:function(t,e,n,i){var o,u;t!==e&&(o=t>n,u=v(x(C(),o)),o?u>=0:u<=_[g("scrollWidth")]-on(y)[g("width")])&&(A(),E(x(C(),t>n),!0)),s(4),a(Ln,e,n,t),r.start(e,(function(){s(3),a(Nn,e,n,t),i&&i()}))},jump:w,translate:E,shift:x,cancel:A,toIndex:$,toPosition:T,getPosition:C,getLimit:k,exceededLimit:function(t,e){e=De(e)?C():e;var n=!0!==t&&v(e)<v(k(!1)),r=!1!==t&&v(e)>v(k(!0));return n||r},reposition:b}},Controller:function(t,e,n){var r,i,o,a,s=tr(t),u=s.on,l=s.emit,c=e.Move,f=c.getPosition,d=c.getLimit,h=c.toPosition,p=e.Slides,g=p.isEnough,v=p.getLength,m=n.omitEnd,_=t.is(ei),y=t.is(ti),b=Ee(T,!1),w=Ee(T,!0),E=n.start||0,x=E;function A(){i=v(!0),o=n.perMove,a=n.perPage,r=S();var t=An(E,0,m?r:i-1);t!==E&&(E=t,c.reposition())}function $(){r!==S()&&l(Qn)}function T(t,e){var n=o||(N()?1:a),i=C(E+n*(t?-1:1),E,!(o||N()));return-1===i&&y&&!En(f(),d(!t),1)?t?0:r:e?i:k(i)}function C(e,s,u){if(g()||N()){var l=function(e){if(y&&"move"===n.trimSpace&&e!==E)for(var r=f();r===h(e,!0)&&xn(e,0,t.length-1,!n.rewind);)e<E?--e:++e;return e}(e);l!==e&&(s=e,e=l,u=!1),e<0||e>r?e=o||!xn(0,e,s,!0)&&!xn(r,s,e,!0)?_?u?e<0?-(i%a||a):i:e:n.rewind?e<0?r:0:-1:I(D(e)):u&&e!==s&&(e=I(D(s)+(e<s?-1:1)))}else e=-1;return e}function k(t){return _?(t+i)%i||0:t}function S(){for(var t=i-(N()||_&&o?1:a);m&&t-- >0;)if(h(i-1,!0)!==h(t,!0)){t++;break}return An(t,0,i-1)}function I(t){return An(N()?t:a*t,0,r)}function D(t){return N()?mn(t,r):yn((t>=r?i-1:t)/a)}function L(t){t!==E&&(x=E,E=t)}function N(){return!De(n.focus)||n.isNavigation}function O(){return t.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){A(),u([Hn,jn,Qn],A),u(Bn,$)},go:function(t,e,n){if(!O()){var i=function(t){var e=E;if(Ie(t)){var n=t.match(/([+\-<>])(\d+)?/)||[],i=n[1],o=n[2];"+"===i||"-"===i?e=C(E+ +(""+i+(+o||1)),E):">"===i?e=o?I(+o):b(!0):"<"===i&&(e=w(!0))}else e=_?t:An(t,0,r);return e}(t),o=k(i);o>-1&&(e||o!==E)&&(L(o),c.move(i,o,x,n))}},scroll:function(t,n,i,o){e.Scroll.scroll(t,n,i,(function(){var t=k(c.toIndex(f()));L(m?mn(t,r):t),o&&o()}))},getNext:b,getPrev:w,getAdjacent:T,getEnd:S,setIndex:L,getIndex:function(t){return t?x:E},toIndex:I,toPage:D,toDest:function(t){var e=c.toIndex(t);return y?An(e,0,r):e},hasFocus:N,isBusy:O}},Arrows:function(t,e,n){var r,i,o=tr(t),a=o.on,s=o.bind,u=o.emit,l=n.classes,c=n.i18n,f=e.Elements,d=e.Controller,h=f.arrows,p=f.track,g=h,v=f.prev,m=f.next,_={};function y(){!function(){var t=n.arrows;!t||v&&m||(g=h||Je("div",l.arrows),v=x(!0),m=x(!1),r=!0,He(g,[v,m]),!h&&Ue(g,p));v&&m&&(qe(_,{prev:v,next:m}),tn(g,t?"":"none"),je(g,i=Lr+"--"+n.direction),t&&(a([In,Nn,jn,Fn,Qn],A),s(m,"click",Ee(E,">")),s(v,"click",Ee(E,"<")),A(),Ye([v,m],dr,p.id),u(Zn,v,m)))}(),a(Hn,b)}function b(){w(),y()}function w(){o.destroy(),fn(g,i),r?(an(h?[v,m]:g),v=m=null):Ge([v,m],xr)}function E(t){d.go(t,!0)}function x(t){return sn('<button class="'+l.arrow+" "+(t?l.prev:l.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function A(){if(v&&m){var e=t.index,n=d.getPrev(),r=d.getNext(),i=n>-1&&e<n?c.last:c.prev,o=r>-1&&e>r?c.first:c.next;v.disabled=n<0,m.disabled=r<0,Ye(v,gr,i),Ye(m,gr,o),u("arrows:updated",v,m,n,r)}}return{arrows:_,mount:y,destroy:w,update:A}},Autoplay:function(t,e,n){var r,i,o=tr(t),a=o.on,s=o.bind,u=o.emit,l=er(n.interval,t.go.bind(t,">"),(function(t){var e=f.bar;e&&Qe(e,"width",100*t+"%"),u("autoplay:playing",t)})),c=l.isPaused,f=e.Elements,d=e.Elements,h=d.root,p=d.toggle,g=n.autoplay,v="pause"===g;function m(){c()&&e.Slides.isEnough()&&(l.start(!n.resetProgress),i=r=v=!1,b(),u(Xn))}function _(t){void 0===t&&(t=!0),v=!!t,b(),c()||(l.pause(),u(Kn))}function y(){v||(r||i?_(!1):m())}function b(){p&&(ze(p,Br,!v),Ye(p,gr,n.i18n[v?"play":"pause"]))}function w(t){var r=e.Slides.getAt(t);l.set(r&&+nn(r.slide,ii)||n.interval)}return{mount:function(){g&&(!function(){n.pauseOnHover&&s(h,"mouseenter mouseleave",(function(t){r="mouseenter"===t.type,y()}));n.pauseOnFocus&&s(h,"focusin focusout",(function(t){i="focusin"===t.type,y()}));p&&s(p,"click",(function(){v?m():_(!0)}));a([Ln,Wn,jn],l.rewind),a(Ln,w)}(),p&&Ye(p,dr,f.track.id),v||m(),b())},destroy:l.cancel,play:m,pause:_,isPaused:c}},Cover:function(t,e,n){var r=tr(t).on;function i(t){e.Slides.forEach((function(e){var n=Fe(e.container||e.slide,"img");n&&n.src&&o(t,n,e)}))}function o(t,e,n){n.style("background",t?'center/cover no-repeat url("'+e.src+'")':"",!0),tn(e,t?"none":"")}return{mount:function(){n.cover&&(r(Gn,Ee(o,!0)),r([In,Hn,jn],Ee(i,!0)))},destroy:Ee(i,!1)}},Scroll:function(t,e,n){var r,i,o=tr(t),a=o.on,s=o.emit,u=t.state.set,l=e.Move,c=l.getPosition,f=l.getLimit,d=l.exceededLimit,h=l.translate,p=t.is(ti),g=1;function v(t,n,o,a,f){var h=c();if(y(),o&&(!p||!d())){var v=e.Layout.sliderSize(),b=$n(t)*v*yn(wn(t)/v)||0;t=l.toPosition(e.Controller.toDest(t%v))+b}var w=En(h,t,1);g=1,n=w?0:n||_n(wn(t-h)/1.5,800),i=a,r=er(n,m,Ee(_,h,t,f),1),u(5),s(Wn),r.start()}function m(){u(3),i&&i(),s(Fn)}function _(t,e,r,o){var a=c(),s=t+(e-t)*function(t){var e=n.easingFunc;return e?e(t):1-Math.pow(1-t,4)}(o),u=(s-a)*g;h(a+u),p&&!r&&d()&&(g*=.6,wn(u)<10&&v(f(d(!0)),600,!1,i,!0))}function y(){r&&r.cancel()}function b(){r&&!r.isPaused()&&(y(),m())}return{mount:function(){a(Ln,y),a([Hn,jn],b)},destroy:y,scroll:v,cancel:b}},Drag:function(t,e,n){var r,i,o,a,s,u,l,c,f=tr(t),d=f.on,h=f.emit,p=f.bind,g=f.unbind,v=t.state,m=e.Move,_=e.Scroll,y=e.Controller,b=e.Elements.track,w=e.Media.reduce,E=e.Direction,x=E.resolve,A=E.orient,$=m.getPosition,T=m.exceededLimit,C=!1;function k(){var t=n.drag;j(!t),a="free"===t}function S(t){if(u=!1,!l){var e=z(t);r=t.target,i=n.noDrag,Be(r,"."+Rr+", ."+Nr)||i&&Be(r,i)||!e&&t.button||(y.isBusy()?un(t,!0):(c=e?b:window,s=v.is([4,5]),o=null,p(c,Jr,I,oi),p(c,Qr,D,oi),m.cancel(),_.cancel(),N(t)))}var r,i}function I(e){if(v.is(6)||(v.set(6),h("drag")),e.cancelable)if(s){m.translate(r+O(e)/(C&&t.is(ti)?5:1));var i=P(e)>200,o=C!==(C=T());(i||o)&&N(e),u=!0,h("dragging"),un(e)}else(function(t){return wn(O(t))>wn(O(t,!0))})(e)&&(s=function(t){var e=n.dragMinThreshold,r=Ce(e),i=r&&e.mouse||0,o=(r?e.touch:+e)||10;return wn(O(t))>(z(t)?o:i)}(e),un(e))}function D(r){v.is(6)&&(v.set(3),h("dragged")),s&&(!function(r){var i=function(e){if(t.is(ei)||!C){var n=P(e);if(n&&n<200)return O(e)/n}return 0}(r),o=function(t){return $()+$n(t)*mn(wn(t)*(n.flickPower||600),a?1/0:e.Layout.listSize()*(n.flickMaxPages||1))}(i),s=n.rewind&&n.rewindByDrag;w(!1),a?y.scroll(o,0,n.snap):t.is(ni)?y.go(A($n(i))<0?s?"<":"-":s?">":"+"):t.is(ti)&&C&&s?y.go(T(!0)?">":"<"):y.go(y.toDest(o),!0);w(!0)}(r),un(r)),g(c,Jr,I),g(c,Qr,D),s=!1}function L(t){!l&&u&&un(t,!0)}function N(t){o=i,i=t,r=$()}function O(t,e){return R(t,e)-R(M(t),e)}function P(t){return dn(t)-dn(M(t))}function M(t){return i===t&&o||i}function R(t,e){return(z(t)?t.changedTouches[0]:t)["page"+x(e?"Y":"X")]}function z(t){return"undefined"!=typeof TouchEvent&&t instanceof TouchEvent}function j(t){l=t}return{mount:function(){p(b,Jr,Ae,oi),p(b,Qr,Ae,oi),p(b,Yr,S,oi),p(b,"click",L,{capture:!0}),p(b,"dragstart",un),d([In,Hn],k)},disable:j,isDragging:function(){return s}}},Keyboard:function(t,e,n){var r,i,o=tr(t),a=o.on,s=o.bind,u=o.unbind,l=t.root,c=e.Direction.resolve;function f(){var t=n.keyboard;t&&(r="global"===t?window:l,s(r,ui,p))}function d(){u(r,ui)}function h(){var t=i;i=!0,xe((function(){i=t}))}function p(e){if(!i){var n=si(e);n===c(rr)?t.go("<"):n===c(ir)&&t.go(">")}}return{mount:function(){f(),a(Hn,d),a(Hn,f),a(Ln,h)},destroy:d,disable:function(t){i=t}}},LazyLoad:function(t,e,n){var r=tr(t),i=r.on,o=r.off,a=r.bind,s=r.emit,u="sequential"===n.lazyLoad,l=[Nn,Fn],c=[];function f(){be(c),e.Slides.forEach((function(t){cn(t.slide,fi).forEach((function(e){var r=nn(e,li),i=nn(e,ci);if(r!==e.src||i!==e.srcset){var o=n.classes.spinner,a=e.parentElement,s=Fe(a,"."+o)||Je("span",o,a);c.push([e,t,s]),e.src||tn(e,"none")}}))})),u?g():(o(l),i(l,d),d())}function d(){(c=c.filter((function(e){var r=n.perPage*((n.preloadPages||1)+1)-1;return!e[1].isWithin(t.index,r)||h(e)}))).length||o(l)}function h(t){var e=t[0];je(t[1].slide,Zr),a(e,"load error",Ee(p,t)),Ye(e,"src",nn(e,li)),Ye(e,"srcset",nn(e,ci)),Ge(e,li),Ge(e,ci)}function p(t,e){var n=t[0],r=t[1];fn(r.slide,Zr),"error"!==e.type&&(an(t[2]),tn(n,""),s(Gn,n,r),s(Un)),u&&g()}function g(){c.length&&h(c.shift())}return{mount:function(){n.lazyLoad&&(f(),i(jn,f))},destroy:Ee(be,c),check:d}},Pagination:function(t,e,n){var r,i,o=tr(t),a=o.on,s=o.emit,u=o.bind,l=e.Slides,c=e.Elements,f=e.Controller,d=f.hasFocus,h=f.getIndex,p=f.go,g=e.Direction.resolve,v=c.pagination,m=[];function _(){r&&(an(v?we(r.children):r),fn(r,i),be(m),r=null),o.destroy()}function y(t){p(">"+t,!0)}function b(t,e){var n=m.length,r=si(e),i=w(),o=-1;r===g(ir,!1,i)?o=++t%n:r===g(rr,!1,i)?o=(--t+n)%n:"Home"===r?o=0:"End"===r&&(o=n-1);var a=m[o];a&&(en(a.button),p(">"+o),un(e,!0))}function w(){return n.paginationDirection||n.direction}function E(t){return m[f.toPage(t)]}function x(){var t=E(h(!0)),e=E(h());if(t){var n=t.button;fn(n,Br),Ge(n,pr),Ye(n,cr,-1)}if(e){var i=e.button;je(i,Br),Ye(i,pr,!0),Ye(i,cr,"")}s("pagination:updated",{list:r,items:m},t,e)}return{items:m,mount:function e(){_(),a([Hn,jn,Qn],e);var o=n.pagination;v&&tn(v,o?"":"none"),o&&(a([Ln,Wn,Fn],x),function(){var e=t.length,o=n.classes,a=n.i18n,s=n.perPage,h=d()?f.getEnd()+1:bn(e/s);je(r=v||Je("ul",o.pagination,c.track.parentElement),i=Mr+"--"+w()),Ye(r,lr,"tablist"),Ye(r,gr,a.select),Ye(r,_r,w()===sr?"vertical":"");for(var p=0;p<h;p++){var g=Je("li",null,r),_=Je("button",{class:o.page,type:"button"},g),E=l.getIn(p).map((function(t){return t.slide.id})),x=!d()&&s>1?a.pageX:a.slideX;u(_,"click",Ee(y,p)),n.paginationKeyboard&&u(_,"keydown",Ee(b,p)),Ye(g,lr,"presentation"),Ye(_,lr,"tab"),Ye(_,dr,E.join(" ")),Ye(_,gr,Tn(x,p+1)),Ye(_,cr,-1),m.push({li:g,button:_,page:p})}}(),x(),s("pagination:mounted",{list:r,items:m},E(t.index)))},destroy:_,getAt:E,update:x}},Sync:function(t,e,n){var r=n.isNavigation,i=n.slideFocus,o=[];function a(){var e,n;t.splides.forEach((function(e){e.isParent||(u(t,e.splide),u(e.splide,t))})),r&&(e=tr(t),(n=e.on)(On,c),n(Yn,f),n([In,Hn],l),o.push(e),e.emit(qn,t.splides))}function s(){o.forEach((function(t){t.destroy()})),be(o)}function u(t,e){var n=tr(t);n.on(Ln,(function(t,n,r){e.go(e.is(ei)?r:t)})),o.push(n)}function l(){Ye(e.Elements.list,_r,n.direction===sr?"vertical":"")}function c(e){t.go(e.index)}function f(t,e){Me(di,si(e))&&(c(t),un(e))}return{setup:Ee(e.Media.set,{slideFocus:De(i)?r:i},!0),mount:a,destroy:s,remount:function(){s(),a()}}},Wheel:function(t,e,n){var r=tr(t).bind,i=0;function o(r){if(r.cancelable){var o=r.deltaY,a=o<0,s=dn(r),u=n.wheelMinThreshold||0,l=n.wheelSleep||0;wn(o)>u&&s-i>l&&(t.go(a?"<":">"),i=s),function(r){return!n.releaseWheel||t.state.is(4)||-1!==e.Controller.getAdjacent(r)}(a)&&un(r)}}return{mount:function(){n.wheel&&r(e.Elements.track,"wheel",o,oi)}}},Live:function(t,e,n){var r=tr(t).on,i=e.Elements.track,o=n.live&&!n.isNavigation,a=Je("span",Hr),s=er(90,Ee(u,!1));function u(t){Ye(i,wr,t),t?(He(i,a),s.start()):(an(a),s.cancel())}function l(t){o&&Ye(i,br,t?"off":"polite")}return{mount:function(){o&&(l(!e.Autoplay.isPaused()),Ye(i,Er,!0),a.textContent="…",r(Xn,Ee(l,!0)),r(Kn,Ee(l,!1)),r([Nn,Fn],Ee(u,!0)))},disable:l,destroy:function(){Ge(i,[br,Er,wr]),an(a)}}}}),pi={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:Gr,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function gi(t,e,n){var r=e.Slides;function i(){r.forEach((function(t){t.style("transform","translateX(-"+100*t.index+"%)")}))}return{mount:function(){tr(t).on([In,jn],i)},start:function(t,e){r.style("transition","opacity "+n.speed+"ms "+n.easing),xe(e)},cancel:Ae}}function vi(t,e,n){var r,i=e.Move,o=e.Controller,a=e.Scroll,s=e.Elements.list,u=Ee(Qe,s,"transition");function l(){u(""),a.cancel()}return{mount:function(){tr(t).bind(s,"transitionend",(function(t){t.target===s&&r&&(l(),r())}))},start:function(e,s){var l=i.toPosition(e,!0),c=i.getPosition(),f=function(e){var r=n.rewindSpeed;if(t.is(ti)&&r){var i=o.getIndex(!0),a=o.getEnd();if(0===i&&e>=a||i>=a&&0===e)return r}return n.speed}(e);wn(l-c)>=1&&f>=1?n.useScroll?a.scroll(l,f,!1,s):(u("transform "+f+"ms "+n.easing),i.translate(l,!0),r=s):(i.jump(e),s())},cancel:l}}var mi=function(){function t(e,n){var r;this.event=tr(),this.Components={},this.state=(r=1,{set:function(t){r=t},is:function(t){return Me(Oe(t),r)}}),this.splides=[],this._o={},this._E={};var i=Ie(e)?ln(document,e):e;vn(i,i+" is invalid."),this.root=i,n=Xe({label:nn(i,gr)||"",labelledby:nn(i,vr)||""},pi,t.defaults,n||{});try{Xe(n,JSON.parse(nn(i,gn)))}catch(t){vn(!1,"Invalid JSON")}this._o=Object.create(Xe({},n))}var e,n,r,i=t.prototype;return i.mount=function(t,e){var n=this,r=this.state,i=this.Components;return vn(r.is([1,7]),"Already mounted!"),r.set(1),this._C=i,this._T=e||this._T||(this.is(ni)?gi:vi),this._E=t||this._E,Ze(qe({},hi,this._E,{Transition:this._T}),(function(t,e){var r=t(n,i,n._o);i[e]=r,r.setup&&r.setup()})),Ze(i,(function(t){t.mount&&t.mount()})),this.emit(In),je(this.root,Ur),r.set(3),this.emit(Dn),this},i.sync=function(t){return this.splides.push({splide:t}),t.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),t.Components.Sync.remount()),this},i.go=function(t){return this._C.Controller.go(t),this},i.on=function(t,e){return this.event.on(t,e),this},i.off=function(t){return this.event.off(t),this},i.emit=function(t){var e;return(e=this.event).emit.apply(e,[t].concat(we(arguments,1))),this},i.add=function(t,e){return this._C.Slides.add(t,e),this},i.remove=function(t){return this._C.Slides.remove(t),this},i.is=function(t){return this._o.type===t},i.refresh=function(){return this.emit(jn),this},i.destroy=function(t){void 0===t&&(t=!0);var e=this.event,n=this.state;return n.is(1)?tr(this).on(Dn,this.destroy.bind(this,t)):(Ze(this._C,(function(e){e.destroy&&e.destroy(t)}),!0),e.emit(Vn),e.destroy(),t&&be(this.splides),n.set(7)),this},e=t,(n=[{key:"options",get:function(){return this._o},set:function(t){this._C.Media.set(t,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}])&&me(e.prototype,n),r&&me(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();mi.defaults={},mi.STATES=ye;let _i=class extends le{constructor(){super(...arguments),this.splide=null,this.scrollBackTimer=null}firstUpdated(t){this._initializeSplide(),this._initializeScrollbackTimer()}updated(t){super.updated(t),t.get("cardConfig")?(this._initializeScrollbackTimer(),this._initializeSplide()):t.get("departures")&&this.splide?.refresh()}createLayout(){return new ge(this.cardConfig.layout,ct.VERTICAL)}disconnectedCallback(){super.disconnectedCallback(),this.scrollBackTimer?.stop(),this.scrollBackTimer=null}renderContent(){return W`
    <div class="splide-root" id="content-background" theme=${this.theme}>
      ${this.renderListHeader()}
      <div class="splide">
        <div style="position:relative">
          <div class="splide__arrows"></div>
            <div class="splide__track">
              <ul class="splide__list">
                ${this.departures.map((t=>W`<li class="splide__slide">${this.renderDepartureLine(t)}</li>`))}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    `}getQueryLineElements(){return".departure-line"}getQueryTimeElements(){return".cell-time-diff"}_restartscrollBackTimer(){null==this.scrollBackTimer&&(console.log("Scrollback timer is null, create a new instance"),this._initializeScrollbackTimer()),this.scrollBackTimer?this.scrollBackTimer.isRunning()?this.scrollBackTimer.restart():this.scrollBackTimer.start((()=>{this.splide?.go(0)})):console.error("Scrollback timer has not been created!")}_initializeScrollbackTimer(){if(this.scrollBackTimer&&(this.scrollBackTimer.stop(),this.scrollBackTimer=null),0==this.cardConfig.scrollBackTimeout)return;const t=1e3*(this.cardConfig.scrollBackTimeout||5);this.scrollBackTimer=new bt(t)}_initializeSplide(){this.splide&&this.splide.destroy();const t=this.renderRoot.querySelector(".splide"),e=this.cardConfig.departuresToShow??5;if(!t||void 0===t)return;const n={type:"slide",perPage:e,autoplay:!1,pagination:!1,arrows:this.cardConfig.showScrollButtons??It,gap:5,direction:"ttb",height:this._getContentHeight(),drag:!0,wheel:!0};this.splide=new mi(t,n),this.splide.on("moved scrolled dragged",(t=>{0==t?this.scrollBackTimer?.stop():this._restartscrollBackTimer()})),this.splide.mount()}_getContentHeight(){const t=this.cardConfig.departuresToShow??5;return 36*t+5*t}};_i.styles=[s`
      ${a(".splide__container{box-sizing:border-box;position:relative}.splide__list{backface-visibility:hidden;display:-ms-flexbox;display:flex;height:100%;margin:0!important;padding:0!important}.splide.is-initialized:not(.is-active) .splide__list{display:block}.splide__pagination{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;margin:0;pointer-events:none}.splide__pagination li{display:inline-block;line-height:1;list-style-type:none;margin:0;pointer-events:auto}.splide:not(.is-overflow) .splide__pagination{display:none}.splide__progress__bar{width:0}.splide{position:relative;visibility:hidden}.splide.is-initialized,.splide.is-rendered{visibility:visible}.splide__slide{backface-visibility:hidden;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;list-style-type:none!important;margin:0;position:relative}.splide__slide img{vertical-align:bottom}.splide__spinner{animation:splide-loading 1s linear infinite;border:2px solid #999;border-left-color:transparent;border-radius:50%;bottom:0;contain:strict;display:inline-block;height:20px;left:0;margin:auto;position:absolute;right:0;top:0;width:20px}.splide__sr{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.splide__toggle.is-active .splide__toggle__play,.splide__toggle__pause{display:none}.splide__toggle.is-active .splide__toggle__pause{display:inline}.splide__track{overflow:hidden;position:relative;z-index:0}@keyframes splide-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.splide__track--draggable{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.splide__track--fade>.splide__list>.splide__slide{margin:0!important;opacity:0;z-index:0}.splide__track--fade>.splide__list>.splide__slide.is-active{opacity:1;z-index:1}.splide--rtl{direction:rtl}.splide__track--ttb>.splide__list{display:block}.splide__arrow{-ms-flex-align:center;align-items:center;background:#ccc;border:0;border-radius:50%;cursor:pointer;display:-ms-flexbox;display:flex;height:2em;-ms-flex-pack:center;justify-content:center;opacity:.7;padding:0;position:absolute;top:50%;transform:translateY(-50%);width:2em;z-index:1}.splide__arrow svg{fill:#000;height:1.2em;width:1.2em}.splide__arrow:hover:not(:disabled){opacity:.9}.splide__arrow:disabled{opacity:.3}.splide__arrow:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide__arrow--prev{left:1em}.splide__arrow--prev svg{transform:scaleX(-1)}.splide__arrow--next{right:1em}.splide.is-focus-in .splide__arrow:focus{outline:3px solid #0bf;outline-offset:3px}.splide__pagination{bottom:.5em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:#ccc;border:0;border-radius:50%;display:inline-block;height:8px;margin:3px;opacity:.7;padding:0;position:relative;transition:transform .2s linear;width:8px}.splide__pagination__page.is-active{background:#fff;transform:scale(1.4);z-index:1}.splide__pagination__page:hover{cursor:pointer;opacity:.9}.splide__pagination__page:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__pagination__page:focus{outline:3px solid #0bf;outline-offset:3px}.splide__progress__bar{background:#ccc;height:3px}.splide__slide{-webkit-tap-highlight-color:rgba(0,0,0,0)}.splide__slide:focus{outline:0}@supports(outline-offset:-3px){.splide__slide:focus-visible{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide__slide:focus-visible{border:3px solid #0bf}}@supports(outline-offset:-3px){.splide.is-focus-in .splide__slide:focus{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide.is-focus-in .splide__slide:focus{border:3px solid #0bf}.splide.is-focus-in .splide__track>.splide__list>.splide__slide:focus{border-color:#0bf}}.splide__toggle{cursor:pointer}.splide__toggle:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__toggle:focus{outline:3px solid #0bf;outline-offset:3px}.splide__track--nav>.splide__list>.splide__slide{border:3px solid transparent;cursor:pointer}.splide__track--nav>.splide__list>.splide__slide.is-active{border:3px solid #000}.splide__arrows--rtl .splide__arrow--prev{left:auto;right:1em}.splide__arrows--rtl .splide__arrow--prev svg{transform:scaleX(1)}.splide__arrows--rtl .splide__arrow--next{left:1em;right:auto}.splide__arrows--rtl .splide__arrow--next svg{transform:scaleX(-1)}.splide__arrows--ttb .splide__arrow{left:50%;transform:translate(-50%)}.splide__arrows--ttb .splide__arrow--prev{top:1em}.splide__arrows--ttb .splide__arrow--prev svg{transform:rotate(-90deg)}.splide__arrows--ttb .splide__arrow--next{bottom:1em;top:auto}.splide__arrows--ttb .splide__arrow--next svg{transform:rotate(90deg)}.splide__pagination--ttb{bottom:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;left:auto;padding:1em 0;right:.5em;top:0}")}
    `,le.styles],_i=t([jt("card-content-list")],_i);var yi="\\d\\d?",bi="\\d\\d",wi="[^\\s]+";function Ei(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var xi=function(t){return function(e,n){var r=n[t].map((function(t){return t.toLowerCase()})),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function Ai(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t}var $i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ti=["January","February","March","April","May","June","July","August","September","October","November","December"],Ci=Ei(Ti,3),ki={dayNamesShort:Ei($i,3),dayNames:$i,monthNamesShort:Ci,monthNames:Ti,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},Si=(Ai({},ki),function(t){return+t-1}),Ii=[null,yi],Di=[null,wi],Li=["isPm",wi,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],Ni=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}];xi("monthNamesShort"),xi("monthNames");var Oi,Pi;!function(){try{(new Date).toLocaleDateString("i")}catch(t){return"RangeError"===t.name}}(),function(){try{(new Date).toLocaleString("i")}catch(t){return"RangeError"===t.name}}(),function(){try{(new Date).toLocaleTimeString("i")}catch(t){return"RangeError"===t.name}}(),function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(Oi||(Oi={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(Pi||(Pi={}));var Mi=function(t,e,n,r){r=r||{},n=null==n?{}:n;var i=new Event(e,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});return i.detail=n,t.dispatchEvent(i),i};let Ri=class extends st{constructor(){super(...arguments),this._schema=[{name:"entity",selector:{entity:{},domain:"ha_departures"}},{name:"destinationName",selector:{text:{}}},{name:"",type:"grid",schema:[{name:"lineName",selector:{text:{}}},{name:"lineColor",selector:{text:{}}}]},{name:"icon",selector:{icon:{}}}],this._computeLabelCallback=t=>se(`card.editor.entity.${t.name}`,this.hass.locale?.language)}render(){return this.hass?W`
      <div class="entity-editor-content">
        <div id="card-options">
          <ha-icon-button .label=${se("card.editor.entity.remove",this.hass.locale?.language)} .path=${"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"} @click=${this.handleDelete}> </ha-icon-button>
        </div>
        <ha-form .schema="${this._schema}" .hass="${this.hass}" .data="${this.data?.config}" @value-changed=${this._configChanged} .computeLabel=${this._computeLabelCallback}>
        </ha-form>
      </div>
    `:V}_configChanged(t){this.dispatchEvent(new CustomEvent("onChange",{detail:t.detail.value}))}handleDelete(){this.dispatchEvent(new CustomEvent("onDelete",{detail:this.data?.index}))}};Ri.styles=[pt,s`
      .entity-editor-content {
        border: 1px solid var(--divider-color);
        padding: 10px;
        margin-bottom: 24px;
      }
      #card-options {
        display: flex;
        justify-content: flex-end;
        width: 100%;
      }
      ha-form {
        display: block;
        padding: 10px;
      }
    `],t([Bt({attribute:!1})],Ri.prototype,"hass",void 0),t([Bt({attribute:!1})],Ri.prototype,"data",void 0),Ri=t([jt("departures-entity-editor")],Ri);class zi{constructor(t,e){this.index=t,this.config=void 0===e?{entity:"",lineColor:null,lineName:null,destinationName:null}:e}}let ji=class extends st{constructor(){super(...arguments),this._tabs=[],this._currTab="1",this._schemaGeneral=t=>[{name:"showCardHeader",selector:{boolean:{}}},...t?[{name:"",type:"grid",column_min_width:"100px",schema:[{name:"title",required:!1,selector:{text:{}}},{name:"icon",required:!1,selector:{icon:{}}}]}]:[]],this._schemaDesign=(t,e)=>[{name:"cardOrientation",required:!0,selector:{select:{mode:"box",options:[{label:"Vertical",value:ct.VERTICAL,description:t({name:"cardOrientationVerticalDescription"})},{label:"Horizontal",value:ct.HORIZONTAL,description:t({name:"cardOrientationHorizontalDescription"})}]}}},{name:"theme",type:"select",required:!0,selector:{select:{options:[{label:"Basic",value:lt.BASIC},{label:"Black-White",value:lt.BLACK_WHITE},{label:"Blue Ocean",value:lt.BLUE_OCEAN},{label:"Cappucino",value:lt.CAPPUCINO}],mode:"dropdown"}}},{name:"showListHeader",selector:{boolean:{}}},...e==ct.VERTICAL?[{name:"showScrollButtons",selector:{boolean:{}}},{name:"scrollBackTimeout",selector:{number:{min:0,max:20,step:1,mode:"slider"}}}]:[{name:"sortDepartures",selector:{boolean:{}}}],{name:"departuresToShow",selector:{number:{min:1,max:20,step:1,mode:"slider"}}}],this._schemaLayout=t=>[{name:"layout",selector:{select:{reorder:!0,multiple:!0,custom_value:!1,options:[ft.ICON,ft.LINE,ft.DESTINATION,ft.PLANNED_TIME,ft.ESTIMATED_TIME,ft.TIME_DIFF,ft.DELAY].map((e=>({value:e,label:t({name:`layout-cells.${e}`})}))),default:[ft.ICON,ft.DESTINATION]}}}],this._schemaAnimation=t=>[{name:"departureIcon",required:!1,selector:{icon:{}}},{name:"animateLine",required:!1,selector:{boolean:{}}},{name:"arrivalTimeOffset",selector:{number:{min:0,max:60,step:1,mode:"slider"}}},{name:"departureAnimation",type:"select",required:!0,selector:{select:{options:[{value:"none",label:t({name:"noAnimation"})},{value:"bounce",label:"Bounce"},{value:"flash",label:"Flash"},{value:"shakeX",label:"Shake X"},{value:"shakeY",label:"Shake Y"},{value:"fadeIn",label:"Fade In"},{value:"fadeOut",label:"Fade Out"},{value:"zoomIn",label:"Zoom In"},{value:"zoomOut",label:"Zoom Out"},{value:"flipInX",label:"FlipIn X"},{value:"flipOutX",label:"FlipOut X"}],mode:"dropdown",default:"none"}}}],this.computeLabelCallback=t=>se(`card.editor.${t.name}`,this.hass.locale?.language)}connectedCallback(){super.connectedCallback(),this._renderAnimatePreview()}updated(t){super.updated(t),this._renderAnimatePreview()}setConfig(t){let e={...t};"string"==typeof t.layout&&(e={...e,layout:t.layout.split(" ")}),null==t.arrivalTimeOffset&&(e={...e,arrivalTimeOffset:0},console.warn("No arrivalTimeOffset found, set default value")),null==t.departureAnimation&&(e={...e,departureAnimation:Lt},console.warn("No departureAnimation found, set default value")),null==t.departuresToShow&&(e={...e,departuresToShow:5},console.warn("No departuresToShow found, set default value")),null==t.scrollBackTimeout&&(e={...e,scrollBackTimeout:5},console.warn("No scrollBackTimeout found, set default value")),this._config=e,this._tabs=t.entities?.map(((t,e)=>new zi(Number(e+1),t)))||[]}render(){if(!this.hass||!this._config)return V;0===this._tabs.length&&this.addEntity();const t=this.hass.locale?.language,e=this._schemaGeneral(this._config.showCardHeader),n=this._schemaDesign(this.computeLabelCallback,this._config.cardOrientation),r=this._schemaLayout(this.computeLabelCallback),i=this._schemaAnimation(this.computeLabelCallback);return W`
      <ha-form
        .schema="${e}"
        .data="${this._config}"
        .hass="${this.hass}"
        .computeLabel=${this.computeLabelCallback}
        .computeHelper=${this.computeHelperCallback}
        @value-changed=${this.configChanged}>
      </ha-form>

      <ha-expansion-panel outlined>
        <ha-svg-icon slot="leading-icon" .path=${"M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z"}></ha-svg-icon>
        <span slot="header">${se("card.editor.design-expandable",t)}</span>
        <div style="padding: 16px 0px;">
          <ha-form
            .schema="${n}"
            .data="${this._config}"
            .hass="${this.hass}"
            .computeLabel=${this.computeLabelCallback}
            .computeHelper=${this.computeHelperCallback}
            @value-changed=${this.configChanged}></ha-form>
        </div>
      </ha-expansion-panel>

      <ha-expansion-panel outlined>
        <ha-svg-icon slot="leading-icon" .path=${"M22,14A2,2 0 0,1 20,16H4A2,2 0 0,1 2,14V10A2,2 0 0,1 4,8H20A2,2 0 0,1 22,10V14M4,14H8V10H4V14M10,14H14V10H10V14M16,14H20V10H16V14Z"}></ha-svg-icon>
        <span slot="header">${se("card.editor.layout-expandable",t)}</span>
        <div style="padding: 16px 0px;">
          <ha-form
            .schema="${r}"
            .data="${this._config}"
            .hass="${this.hass}"
            .computeLabel=${this.computeLabelCallback}
            .computeHelper=${this.computeHelperCallback}
            @value-changed=${this.configChanged}></ha-form>
        </div>
        ${this._config?.cardOrientation==ct.HORIZONTAL?W`<div class="error">
              <ha-icon icon="mdi:alert"></ha-icon>
              <div>
                ${se("card.editor.layoutWarning",t)}:
                <ul>
                  <li><span>${se("card.editor.layout-cells.planned-time",t)}</span></li>
                  <li><span>${se("card.editor.layout-cells.estimated-time",t)}</span></li>
                  <li><span>${se("card.editor.layout-cells.delay",t)}</span></li>
                </ul>
              </div>
            </div>`:V}
      </ha-expansion-panel>

      <ha-expansion-panel outlined>
        <ha-svg-icon slot="leading-icon" .path=${"M4,2C2.89,2 2,2.89 2,4V14H4V4H14V2H4M8,6C6.89,6 6,6.89 6,8V18H8V8H18V6H8M12,10C10.89,10 10,10.89 10,12V20C10,21.11 10.89,22 12,22H20C21.11,22 22,21.11 22,20V12C22,10.89 21.11,10 20,10H12Z"}></ha-svg-icon>
        <span slot="header">${se("card.editor.animation-expandable",t)}</span>
        <div style="padding: 16px 0px;">
          <ha-form
            .schema="${i}"
            .data="${this._config}"
            .hass="${this.hass}"
            .computeLabel=${this.computeLabelCallback}
            .computeHelper=${this.computeHelperCallback}
            @value-changed=${this.configChanged}></ha-form>
          <div style="padding:0px 10px;">
            <h4>Animation Preview</h4>
            ${this._renderAnimatePreview()}
          </div>
        </div>
      </ha-expansion-panel>

      <ha-expansion-panel outlined>
        <ha-svg-icon slot="leading-icon" .path=${"M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"}></ha-svg-icon>
        <span slot="header">${se("card.editor.entities-expandable",t)}</span>
        <div class="card-config">
          <div class="toolbar">
            <ha-tab-group @wa-tab-show=${this.handleTabChanged}>
              ${this._tabs.map((t=>W` <ha-tab-group-tab slot="nav" .panel=${t.index} .active=${this._currTab===t.index.toString()}> ${t.index} </ha-tab-group-tab> `))}
            </ha-tab-group>
            <ha-icon-button .path=${"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"} .label=${se("card.editor.addEntity",t)} @click=${this.addEntity}></ha-icon-button>
          </div>
          <departures-entity-editor .hass=${this.hass} .data=${this.getTabData()} @onDelete=${this.removeEntity} @onChange=${this.updateEntity}></departures-entity-editor>
        </div>
      </ha-expansion-panel>
    `}getTabData(){const t=parseInt(this._currTab)-1;if(t>=0&&t<this._tabs.length)return this._tabs[t];throw Error(`Wrong entity tab index detected: ${t}. Tabs length: ${this._tabs.length}`)}computeHelperCallback(t){let e=se(`card.editor.help.${t.name}`,this.hass.locale?.language);return e.endsWith(t.name)?void 0:e}addEntity(){if(!this._config)return;let t=new zi(this._tabs.length+1,void 0);this._tabs=[...this._tabs,t],this._currTab=`${this._tabs.length}`,this.updateEntitiesConfig()}removeEntity(t){if(!this._config)return;const e=parseInt(this._currTab)-1;this._tabs.splice(e,1),this.updateEntitiesConfig(),this._currTab=Math.max(1,e).toString()}updateEntity(t){t.stopPropagation();let e=this.getTabData();e?(e.config=t.detail,this.updateEntitiesConfig()):console.warn("No tab found for config change",this._tabs,this._currTab)}updateEntitiesConfig(){const t={...this._config};t.entities=this._tabs.map((t=>t.config)),Mi(this,"config-changed",{config:t})}handleTabChanged(t){const e=t.detail.name.toString();e!==this._currTab&&(this._currTab=e)}configChanged(t){if(t.stopPropagation(),!this._config||!this.hass)return;const e={...t.detail.value};this._config?.departureAnimation!=e.departureAnimation&&this._cancelPreviewAnimations(),console.log("configChanged",e),Mi(this,"config-changed",{config:e})}_renderAnimatePreview(){const t=this._config?.theme??lt.BASIC,e=this._config?.departureAnimation??"none",n=this._config?.animateLine??!1,r=this._config?.departureIcon&&""!==this._config?.departureIcon&&null!=this._config?.departureIcon?this._config?.departureIcon:"mdi:bus",i=this.shadowRoot?.querySelector(".departure-line"),o=this.shadowRoot?.querySelector(".cell-time-diff");let a;return"none"!=e&&e in ue?a=ue[e]:(o?.getAnimations().forEach((t=>{t.cancel()})),i?.getAnimations().forEach((t=>{t.cancel()}))),a&&(n?(i?.animate(a.keyframes,a.options),o?.getAnimations().forEach((t=>{t.cancel()}))):(o?.animate(a.keyframes,a.options),i?.getAnimations().forEach((t=>{t.cancel()})))),W`
      <div class="content">
        <div class="splide-root" id="content-background" theme=${t}>
          <div class="departure-line arriving delayed" theme=${t} style="grid-template-columns:50px 1fr 70px 30px; margin-bottom:10px;">
            <div class="cell-line">U1</div>
            <div class="cell-destination">Airport</div>
            <div>
              <div class="cell-time-diff"><ha-icon icon=${r}></ha-icon></div>
            </div>
            <div><div class="cell-delay delayed" theme=${t}>+2</div></div>
          </div>
          <div class="departure-line" theme=${t} style="grid-template-columns:50px 1fr 70px 30px;">
            <div class="cell-line">54</div>
            <div class="cell-destination">Center</div>
            <div class="cell-time-diff">11:23</div>
            <div class="cell-delay" theme=${t}></div>
          </div>
        </div>
      </div>
    `}_cancelPreviewAnimations(){const t=this.shadowRoot?.querySelector(".departure-line"),e=this.shadowRoot?.querySelector(".cell-time-diff");e?.getAnimations().forEach((t=>{t.cancel()})),t?.getAnimations().forEach((t=>{t.cancel()}))}};var Hi;ji.styles=[pt,gt,s`
      .entity-editor-content {
        border: 1px solid var(--divider-color);
        padding: 10px;
      }
      .toolbar {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
      }
      ha-form {
        display: block;
        padding: 10px;
      }
      ha-expansion-panel {
        margin-top: 20px;
      }
      ha-tab-group {
        flex: 1;
        margin-right: 5px;
        max-width: 400px;
      }
    `],t([Bt({attribute:!1})],ji.prototype,"hass",void 0),t([Wt()],ji.prototype,"_config",void 0),t([Wt()],ji.prototype,"_tabs",void 0),t([Wt()],ji.prototype,"_currTab",void 0),ji=t([jt("departures-card-editor")],ji),window.customCards=window.customCards||[],window.customCards.push({type:"departures-card",name:"Departures Card",description:"Display departure times for different public transports"});console.groupCollapsed("%cDepartures-Card 3.2.0","color:black; font-weight: bold; background: tomato; padding: 2px; border-radius: 5px;"),console.log("Github repository: https://github.com/alex-jung/ha-departures-card"),console.groupEnd();let Ui=Hi=class extends st{constructor(){super(...arguments),this.dataPool=new zt}static getConfigElement(){return document.createElement("departures-card-editor")}static getStubConfig(t){return{type:"custom:departures-card",title:kt,icon:St,departuresToShow:5,showCardHeader:true,showListHeader:true,scrollBackTimeout:5,showScrollButtons:It,cardOrientation:Dt,theme:Ot,sortDepartures:false,departureIcon:"",animateLine:false,departureAnimation:Lt,arrivalTimeOffset:0,layout:Nt,entities:[]}}setConfig(t){if(!t)throw new Error("No configuration provided!");this.config=t}connectedCallback(){super.connectedCallback(),this._updateTimer=setInterval((()=>{this.requestUpdate()}),1e4)}disconnectedCallback(){super.disconnectedCallback(),clearInterval(this._updateTimer)}render(){const t=this.config||Hi.getStubConfig(this.hass),e=Object(this.hass?.selectedTheme).dark??!1,n=t.title??kt,r=t.icon??St;this.dataPool.update(this.hass,this.config.entities);const i=this.dataPool.getDepartures(!0),o=this._getCardContent(t,i);return W`
      <ha-card>
        <div class="card-content">
          ${t.showCardHeader?W`
                <div class="card-header">
                  ${n}
                  <ha-icon icon="${r}"></ha-icon>
                </div>
              `:""}
          <div class="content" data-theme=${e?"dark":"light"}>${o}</div>
        </div>
      </ha-card>
    `}_getCardContent(t,e){const n=this.hass.locale?.language??"en",r=t.theme;switch(t.cardOrientation){case ct.VERTICAL:return W`<card-content-list
          .language=${n}
          .theme=${r}
          .departures=${e}
          .cardConfig=${t}
          .errors=${this.dataPool.errors}></card-content-list>`;case ct.HORIZONTAL:return W`<card-content-table
          .language=${n}
          .theme=${r}
          .departures=${e}
          .cardConfig=${t}
          .errors=${this.dataPool.errors}></card-content-table>`;default:return W`<div>${se("card.errors.no-card-orientation-set",this.hass.locale?.language)}</div>`}}};Ui.styles=[pt],t([Wt()],Ui.prototype,"config",void 0),t([Bt({attribute:!1})],Ui.prototype,"hass",void 0),Ui=Hi=t([jt("departures-card")],Ui);export{Ui as DeparturesCard};
